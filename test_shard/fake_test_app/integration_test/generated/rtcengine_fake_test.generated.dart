/// GENERATED BY testcase_gen. DO NOT MODIFY BY HAND.

// ignore_for_file: deprecated_member_use,constant_identifier_names

import 'package:agora_rtc_engine/agora_rtc_engine.dart';
import 'package:flutter_test/flutter_test.dart';
import 'dart:typed_data';
import 'package:flutter/foundation.dart';
import 'package:fake_test_app/main.dart' as app;
import 'package:iris_tester/iris_tester.dart';
import 'package:iris_method_channel/iris_method_channel.dart';

void rtcEngineSmokeTestCases() {
  testWidgets(
    'RtcEngine.initialize',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const ChannelProfileType contextChannelProfile =
            ChannelProfileType.channelProfileCommunication;
        const AudioScenarioType contextAudioScenario =
            AudioScenarioType.audioScenarioDefault;
        const LogLevel logConfigLevel = LogLevel.logLevelNone;
        const String logConfigFilePath = "hello";
        const int logConfigFileSizeInKB = 10;
        const LogConfig contextLogConfig = LogConfig(
          filePath: logConfigFilePath,
          fileSizeInKB: logConfigFileSizeInKB,
          level: logConfigLevel,
        );
        const ThreadPriorityType contextThreadPriority =
            ThreadPriorityType.lowest;
        const String contextAppId = "hello";
        const String contextLicense = "hello";
        const int contextAreaCode = 10;
        const bool contextUseExternalEglContext = true;
        const bool contextDomainLimit = true;
        const bool contextAutoRegisterAgoraExtensions = true;
        const RtcEngineContext context = RtcEngineContext(
          appId: contextAppId,
          channelProfile: contextChannelProfile,
          license: contextLicense,
          audioScenario: contextAudioScenario,
          areaCode: contextAreaCode,
          logConfig: contextLogConfig,
          threadPriority: contextThreadPriority,
          useExternalEglContext: contextUseExternalEglContext,
          domainLimit: contextDomainLimit,
          autoRegisterAgoraExtensions: contextAutoRegisterAgoraExtensions,
        );
        await rtcEngine.initialize(
          context,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.initialize] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getVersion',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getVersion();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getVersion] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getErrorDescription',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int code = 10;
        await rtcEngine.getErrorDescription(
          code,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getErrorDescription] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.queryDeviceScore',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.queryDeviceScore();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.queryDeviceScore] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.preloadChannel',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        const String channelId = "hello";
        const int uid = 10;
        await rtcEngine.preloadChannel(
          token: token,
          channelId: channelId,
          uid: uid,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.preloadChannel] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.preloadChannelWithUserAccount',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        const String channelId = "hello";
        const String userAccount = "hello";
        await rtcEngine.preloadChannelWithUserAccount(
          token: token,
          channelId: channelId,
          userAccount: userAccount,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.preloadChannelWithUserAccount] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updatePreloadChannelToken',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        await rtcEngine.updatePreloadChannelToken(
          token,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updatePreloadChannelToken] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.joinChannel',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        const String channelId = "hello";
        const int uid = 10;
        const ClientRoleType optionsClientRoleType =
            ClientRoleType.clientRoleBroadcaster;
        const AudienceLatencyLevelType optionsAudienceLatencyLevel =
            AudienceLatencyLevelType.audienceLatencyLevelLowLatency;
        const VideoStreamType optionsDefaultVideoStreamType =
            VideoStreamType.videoStreamHigh;
        const ChannelProfileType optionsChannelProfile =
            ChannelProfileType.channelProfileCommunication;
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishSecondaryCameraTrack = true;
        const bool optionsPublishThirdCameraTrack = true;
        const bool optionsPublishFourthCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishScreenCaptureVideo = true;
        const bool optionsPublishScreenCaptureAudio = true;
        const bool optionsPublishScreenTrack = true;
        const bool optionsPublishSecondaryScreenTrack = true;
        const bool optionsPublishThirdScreenTrack = true;
        const bool optionsPublishFourthScreenTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const int optionsPublishCustomAudioTrackId = 10;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishEncodedVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const bool optionsPublishMediaPlayerVideoTrack = true;
        const bool optionsPublishTranscodedVideoTrack = true;
        const bool optionsPublishMixedAudioTrack = true;
        const bool optionsAutoSubscribeAudio = true;
        const bool optionsAutoSubscribeVideo = true;
        const bool optionsEnableAudioRecordingOrPlayout = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsAudioDelayMs = 10;
        const int optionsMediaPlayerAudioDelayMs = 10;
        const String optionsToken = "hello";
        const bool optionsEnableBuiltInMediaEncryption = true;
        const bool optionsPublishRhythmPlayerTrack = true;
        const bool optionsIsInteractiveAudience = true;
        const int optionsCustomVideoTrackId = 10;
        const bool optionsIsAudioFilterable = true;
        const ChannelMediaOptions options = ChannelMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishSecondaryCameraTrack: optionsPublishSecondaryCameraTrack,
          publishThirdCameraTrack: optionsPublishThirdCameraTrack,
          publishFourthCameraTrack: optionsPublishFourthCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishScreenCaptureVideo: optionsPublishScreenCaptureVideo,
          publishScreenCaptureAudio: optionsPublishScreenCaptureAudio,
          publishScreenTrack: optionsPublishScreenTrack,
          publishSecondaryScreenTrack: optionsPublishSecondaryScreenTrack,
          publishThirdScreenTrack: optionsPublishThirdScreenTrack,
          publishFourthScreenTrack: optionsPublishFourthScreenTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomAudioTrackId: optionsPublishCustomAudioTrackId,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishEncodedVideoTrack: optionsPublishEncodedVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerVideoTrack: optionsPublishMediaPlayerVideoTrack,
          publishTranscodedVideoTrack: optionsPublishTranscodedVideoTrack,
          publishMixedAudioTrack: optionsPublishMixedAudioTrack,
          autoSubscribeAudio: optionsAutoSubscribeAudio,
          autoSubscribeVideo: optionsAutoSubscribeVideo,
          enableAudioRecordingOrPlayout: optionsEnableAudioRecordingOrPlayout,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          clientRoleType: optionsClientRoleType,
          audienceLatencyLevel: optionsAudienceLatencyLevel,
          defaultVideoStreamType: optionsDefaultVideoStreamType,
          channelProfile: optionsChannelProfile,
          audioDelayMs: optionsAudioDelayMs,
          mediaPlayerAudioDelayMs: optionsMediaPlayerAudioDelayMs,
          token: optionsToken,
          enableBuiltInMediaEncryption: optionsEnableBuiltInMediaEncryption,
          publishRhythmPlayerTrack: optionsPublishRhythmPlayerTrack,
          isInteractiveAudience: optionsIsInteractiveAudience,
          customVideoTrackId: optionsCustomVideoTrackId,
          isAudioFilterable: optionsIsAudioFilterable,
        );
        await rtcEngine.joinChannel(
          token: token,
          channelId: channelId,
          uid: uid,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.joinChannel] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateChannelMediaOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const ClientRoleType optionsClientRoleType =
            ClientRoleType.clientRoleBroadcaster;
        const AudienceLatencyLevelType optionsAudienceLatencyLevel =
            AudienceLatencyLevelType.audienceLatencyLevelLowLatency;
        const VideoStreamType optionsDefaultVideoStreamType =
            VideoStreamType.videoStreamHigh;
        const ChannelProfileType optionsChannelProfile =
            ChannelProfileType.channelProfileCommunication;
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishSecondaryCameraTrack = true;
        const bool optionsPublishThirdCameraTrack = true;
        const bool optionsPublishFourthCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishScreenCaptureVideo = true;
        const bool optionsPublishScreenCaptureAudio = true;
        const bool optionsPublishScreenTrack = true;
        const bool optionsPublishSecondaryScreenTrack = true;
        const bool optionsPublishThirdScreenTrack = true;
        const bool optionsPublishFourthScreenTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const int optionsPublishCustomAudioTrackId = 10;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishEncodedVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const bool optionsPublishMediaPlayerVideoTrack = true;
        const bool optionsPublishTranscodedVideoTrack = true;
        const bool optionsPublishMixedAudioTrack = true;
        const bool optionsAutoSubscribeAudio = true;
        const bool optionsAutoSubscribeVideo = true;
        const bool optionsEnableAudioRecordingOrPlayout = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsAudioDelayMs = 10;
        const int optionsMediaPlayerAudioDelayMs = 10;
        const String optionsToken = "hello";
        const bool optionsEnableBuiltInMediaEncryption = true;
        const bool optionsPublishRhythmPlayerTrack = true;
        const bool optionsIsInteractiveAudience = true;
        const int optionsCustomVideoTrackId = 10;
        const bool optionsIsAudioFilterable = true;
        const ChannelMediaOptions options = ChannelMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishSecondaryCameraTrack: optionsPublishSecondaryCameraTrack,
          publishThirdCameraTrack: optionsPublishThirdCameraTrack,
          publishFourthCameraTrack: optionsPublishFourthCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishScreenCaptureVideo: optionsPublishScreenCaptureVideo,
          publishScreenCaptureAudio: optionsPublishScreenCaptureAudio,
          publishScreenTrack: optionsPublishScreenTrack,
          publishSecondaryScreenTrack: optionsPublishSecondaryScreenTrack,
          publishThirdScreenTrack: optionsPublishThirdScreenTrack,
          publishFourthScreenTrack: optionsPublishFourthScreenTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomAudioTrackId: optionsPublishCustomAudioTrackId,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishEncodedVideoTrack: optionsPublishEncodedVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerVideoTrack: optionsPublishMediaPlayerVideoTrack,
          publishTranscodedVideoTrack: optionsPublishTranscodedVideoTrack,
          publishMixedAudioTrack: optionsPublishMixedAudioTrack,
          autoSubscribeAudio: optionsAutoSubscribeAudio,
          autoSubscribeVideo: optionsAutoSubscribeVideo,
          enableAudioRecordingOrPlayout: optionsEnableAudioRecordingOrPlayout,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          clientRoleType: optionsClientRoleType,
          audienceLatencyLevel: optionsAudienceLatencyLevel,
          defaultVideoStreamType: optionsDefaultVideoStreamType,
          channelProfile: optionsChannelProfile,
          audioDelayMs: optionsAudioDelayMs,
          mediaPlayerAudioDelayMs: optionsMediaPlayerAudioDelayMs,
          token: optionsToken,
          enableBuiltInMediaEncryption: optionsEnableBuiltInMediaEncryption,
          publishRhythmPlayerTrack: optionsPublishRhythmPlayerTrack,
          isInteractiveAudience: optionsIsInteractiveAudience,
          customVideoTrackId: optionsCustomVideoTrackId,
          isAudioFilterable: optionsIsAudioFilterable,
        );
        await rtcEngine.updateChannelMediaOptions(
          options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateChannelMediaOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.leaveChannel',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool optionsStopAudioMixing = true;
        const bool optionsStopAllEffect = true;
        const bool optionsStopMicrophoneRecording = true;
        const LeaveChannelOptions options = LeaveChannelOptions(
          stopAudioMixing: optionsStopAudioMixing,
          stopAllEffect: optionsStopAllEffect,
          stopMicrophoneRecording: optionsStopMicrophoneRecording,
        );
        await rtcEngine.leaveChannel(
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.leaveChannel] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.renewToken',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        await rtcEngine.renewToken(
          token,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.renewToken] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setChannelProfile',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const ChannelProfileType profile =
            ChannelProfileType.channelProfileCommunication;
        await rtcEngine.setChannelProfile(
          profile,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setChannelProfile] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setClientRole',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const ClientRoleType role = ClientRoleType.clientRoleBroadcaster;
        const AudienceLatencyLevelType optionsAudienceLatencyLevel =
            AudienceLatencyLevelType.audienceLatencyLevelLowLatency;
        const ClientRoleOptions options = ClientRoleOptions(
          audienceLatencyLevel: optionsAudienceLatencyLevel,
        );
        await rtcEngine.setClientRole(
          role: role,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setClientRole] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startEchoTest',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int configView = 10;
        const bool configEnableAudio = true;
        const bool configEnableVideo = true;
        const String configToken = "hello";
        const String configChannelId = "hello";
        const int configIntervalInSeconds = 10;
        const EchoTestConfiguration config = EchoTestConfiguration(
          view: configView,
          enableAudio: configEnableAudio,
          enableVideo: configEnableVideo,
          token: configToken,
          channelId: configChannelId,
          intervalInSeconds: configIntervalInSeconds,
        );
        await rtcEngine.startEchoTest(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startEchoTest] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopEchoTest',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopEchoTest();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopEchoTest] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableMultiCamera',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const CameraDirection configCameraDirection =
            CameraDirection.cameraRear;
        const int formatWidth = 10;
        const int formatHeight = 10;
        const int formatFps = 10;
        const VideoFormat configFormat = VideoFormat(
          width: formatWidth,
          height: formatHeight,
          fps: formatFps,
        );
        const String configDeviceId = "hello";
        const bool configFollowEncodeDimensionRatio = true;
        const CameraCapturerConfiguration config = CameraCapturerConfiguration(
          cameraDirection: configCameraDirection,
          deviceId: configDeviceId,
          format: configFormat,
          followEncodeDimensionRatio: configFollowEncodeDimensionRatio,
        );
        await rtcEngine.enableMultiCamera(
          enabled: enabled,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableMultiCamera] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableVideo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.enableVideo();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableVideo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.disableVideo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.disableVideo();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.disableVideo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startPreview',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        await rtcEngine.startPreview(
          sourceType: sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startPreview] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startPreviewWithoutSourceType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.startPreviewWithoutSourceType();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startPreviewWithoutSourceType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopPreview',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        await rtcEngine.stopPreview(
          sourceType: sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopPreview] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startLastmileProbeTest',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool configProbeUplink = true;
        const bool configProbeDownlink = true;
        const int configExpectedUplinkBitrate = 10;
        const int configExpectedDownlinkBitrate = 10;
        const LastmileProbeConfig config = LastmileProbeConfig(
          probeUplink: configProbeUplink,
          probeDownlink: configProbeDownlink,
          expectedUplinkBitrate: configExpectedUplinkBitrate,
          expectedDownlinkBitrate: configExpectedDownlinkBitrate,
        );
        await rtcEngine.startLastmileProbeTest(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startLastmileProbeTest] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopLastmileProbeTest',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopLastmileProbeTest();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.stopLastmileProbeTest] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVideoEncoderConfiguration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoCodecType configCodecType = VideoCodecType.videoCodecNone;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions configDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const OrientationMode configOrientationMode =
            OrientationMode.orientationModeAdaptive;
        const DegradationPreference configDegradationPreference =
            DegradationPreference.maintainQuality;
        const VideoMirrorModeType configMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const EncodingPreference advanceOptionsEncodingPreference =
            EncodingPreference.preferAuto;
        const CompressionPreference advanceOptionsCompressionPreference =
            CompressionPreference.preferLowLatency;
        const AdvanceOptions configAdvanceOptions = AdvanceOptions(
          encodingPreference: advanceOptionsEncodingPreference,
          compressionPreference: advanceOptionsCompressionPreference,
        );
        const int configFrameRate = 10;
        const int configBitrate = 10;
        const int configMinBitrate = 10;
        const VideoEncoderConfiguration config = VideoEncoderConfiguration(
          codecType: configCodecType,
          dimensions: configDimensions,
          frameRate: configFrameRate,
          bitrate: configBitrate,
          minBitrate: configMinBitrate,
          orientationMode: configOrientationMode,
          degradationPreference: configDegradationPreference,
          mirrorMode: configMirrorMode,
          advanceOptions: configAdvanceOptions,
        );
        await rtcEngine.setVideoEncoderConfiguration(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVideoEncoderConfiguration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setBeautyEffectOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const LighteningContrastLevel optionsLighteningContrastLevel =
            LighteningContrastLevel.lighteningContrastLow;
        const double optionsLighteningLevel = 10.0;
        const double optionsSmoothnessLevel = 10.0;
        const double optionsRednessLevel = 10.0;
        const double optionsSharpnessLevel = 10.0;
        const BeautyOptions options = BeautyOptions(
          lighteningContrastLevel: optionsLighteningContrastLevel,
          lighteningLevel: optionsLighteningLevel,
          smoothnessLevel: optionsSmoothnessLevel,
          rednessLevel: optionsRednessLevel,
          sharpnessLevel: optionsSharpnessLevel,
        );
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.setBeautyEffectOptions(
          enabled: enabled,
          options: options,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setBeautyEffectOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLowlightEnhanceOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const LowLightEnhanceMode optionsMode =
            LowLightEnhanceMode.lowLightEnhanceAuto;
        const LowLightEnhanceLevel optionsLevel =
            LowLightEnhanceLevel.lowLightEnhanceLevelHighQuality;
        const LowlightEnhanceOptions options = LowlightEnhanceOptions(
          mode: optionsMode,
          level: optionsLevel,
        );
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.setLowlightEnhanceOptions(
          enabled: enabled,
          options: options,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setLowlightEnhanceOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVideoDenoiserOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const VideoDenoiserMode optionsMode =
            VideoDenoiserMode.videoDenoiserAuto;
        const VideoDenoiserLevel optionsLevel =
            VideoDenoiserLevel.videoDenoiserLevelHighQuality;
        const VideoDenoiserOptions options = VideoDenoiserOptions(
          mode: optionsMode,
          level: optionsLevel,
        );
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.setVideoDenoiserOptions(
          enabled: enabled,
          options: options,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVideoDenoiserOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setColorEnhanceOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const double optionsStrengthLevel = 10.0;
        const double optionsSkinProtectLevel = 10.0;
        const ColorEnhanceOptions options = ColorEnhanceOptions(
          strengthLevel: optionsStrengthLevel,
          skinProtectLevel: optionsSkinProtectLevel,
        );
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.setColorEnhanceOptions(
          enabled: enabled,
          options: options,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setColorEnhanceOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableVirtualBackground',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const BackgroundSourceType backgroundSourceBackgroundSourceType =
            BackgroundSourceType.backgroundNone;
        const BackgroundBlurDegree backgroundSourceBlurDegree =
            BackgroundBlurDegree.blurDegreeLow;
        const int backgroundSourceColor = 10;
        const String backgroundSourceSource = "hello";
        const VirtualBackgroundSource backgroundSource =
            VirtualBackgroundSource(
          backgroundSourceType: backgroundSourceBackgroundSourceType,
          color: backgroundSourceColor,
          source: backgroundSourceSource,
          blurDegree: backgroundSourceBlurDegree,
        );
        const SegModelType segpropertyModelType = SegModelType.segModelAi;
        const double segpropertyGreenCapacity = 10.0;
        const SegmentationProperty segproperty = SegmentationProperty(
          modelType: segpropertyModelType,
          greenCapacity: segpropertyGreenCapacity,
        );
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.enableVirtualBackground(
          enabled: enabled,
          backgroundSource: backgroundSource,
          segproperty: segproperty,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableVirtualBackground] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setupRemoteVideo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const RenderModeType canvasRenderMode = RenderModeType.renderModeHidden;
        const VideoMirrorModeType canvasMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const VideoViewSetupMode canvasSetupMode =
            VideoViewSetupMode.videoViewSetupReplace;
        const VideoSourceType canvasSourceType =
            VideoSourceType.videoSourceCameraPrimary;
        const int cropAreaX = 10;
        const int cropAreaY = 10;
        const int cropAreaWidth = 10;
        const int cropAreaHeight = 10;
        const Rectangle canvasCropArea = Rectangle(
          x: cropAreaX,
          y: cropAreaY,
          width: cropAreaWidth,
          height: cropAreaHeight,
        );
        const VideoModulePosition canvasPosition =
            VideoModulePosition.positionPostCapturer;
        const int canvasUid = 10;
        const int canvasSubviewUid = 10;
        const int canvasView = 10;
        const int canvasBackgroundColor = 10;
        const int canvasMediaPlayerId = 10;
        const bool canvasEnableAlphaMask = true;
        const VideoCanvas canvas = VideoCanvas(
          uid: canvasUid,
          subviewUid: canvasSubviewUid,
          view: canvasView,
          backgroundColor: canvasBackgroundColor,
          renderMode: canvasRenderMode,
          mirrorMode: canvasMirrorMode,
          setupMode: canvasSetupMode,
          sourceType: canvasSourceType,
          mediaPlayerId: canvasMediaPlayerId,
          cropArea: canvasCropArea,
          enableAlphaMask: canvasEnableAlphaMask,
          position: canvasPosition,
        );
        await rtcEngine.setupRemoteVideo(
          canvas,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setupRemoteVideo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setupLocalVideo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const RenderModeType canvasRenderMode = RenderModeType.renderModeHidden;
        const VideoMirrorModeType canvasMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const VideoViewSetupMode canvasSetupMode =
            VideoViewSetupMode.videoViewSetupReplace;
        const VideoSourceType canvasSourceType =
            VideoSourceType.videoSourceCameraPrimary;
        const int cropAreaX = 10;
        const int cropAreaY = 10;
        const int cropAreaWidth = 10;
        const int cropAreaHeight = 10;
        const Rectangle canvasCropArea = Rectangle(
          x: cropAreaX,
          y: cropAreaY,
          width: cropAreaWidth,
          height: cropAreaHeight,
        );
        const VideoModulePosition canvasPosition =
            VideoModulePosition.positionPostCapturer;
        const int canvasUid = 10;
        const int canvasSubviewUid = 10;
        const int canvasView = 10;
        const int canvasBackgroundColor = 10;
        const int canvasMediaPlayerId = 10;
        const bool canvasEnableAlphaMask = true;
        const VideoCanvas canvas = VideoCanvas(
          uid: canvasUid,
          subviewUid: canvasSubviewUid,
          view: canvasView,
          backgroundColor: canvasBackgroundColor,
          renderMode: canvasRenderMode,
          mirrorMode: canvasMirrorMode,
          setupMode: canvasSetupMode,
          sourceType: canvasSourceType,
          mediaPlayerId: canvasMediaPlayerId,
          cropArea: canvasCropArea,
          enableAlphaMask: canvasEnableAlphaMask,
          position: canvasPosition,
        );
        await rtcEngine.setupLocalVideo(
          canvas,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setupLocalVideo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVideoScenario',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoApplicationScenarioType scenarioType =
            VideoApplicationScenarioType.applicationScenarioGeneral;
        await rtcEngine.setVideoScenario(
          scenarioType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setVideoScenario] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVideoQoEPreference',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoQoePreferenceType qoePreference =
            VideoQoePreferenceType.videoQoePreferenceBalance;
        await rtcEngine.setVideoQoEPreference(
          qoePreference,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVideoQoEPreference] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.enableAudio();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.disableAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.disableAudio();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.disableAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioProfile',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioProfileType profile = AudioProfileType.audioProfileDefault;
        const AudioScenarioType scenario =
            AudioScenarioType.audioScenarioDefault;
        await rtcEngine.setAudioProfile(
          profile: profile,
          scenario: scenario,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAudioProfile] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioScenario',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioScenarioType scenario =
            AudioScenarioType.audioScenarioDefault;
        await rtcEngine.setAudioScenario(
          scenario,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAudioScenario] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableLocalAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableLocalAudio(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableLocalAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteLocalAudioStream',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.muteLocalAudioStream(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.muteLocalAudioStream] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteAllRemoteAudioStreams',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.muteAllRemoteAudioStreams(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.muteAllRemoteAudioStreams] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDefaultMuteAllRemoteAudioStreams',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.setDefaultMuteAllRemoteAudioStreams(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setDefaultMuteAllRemoteAudioStreams] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteRemoteAudioStream',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const bool mute = true;
        await rtcEngine.muteRemoteAudioStream(
          uid: uid,
          mute: mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.muteRemoteAudioStream] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteLocalVideoStream',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.muteLocalVideoStream(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.muteLocalVideoStream] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableLocalVideo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableLocalVideo(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableLocalVideo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteAllRemoteVideoStreams',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.muteAllRemoteVideoStreams(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.muteAllRemoteVideoStreams] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDefaultMuteAllRemoteVideoStreams',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.setDefaultMuteAllRemoteVideoStreams(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setDefaultMuteAllRemoteVideoStreams] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteDefaultVideoStreamType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoStreamType streamType = VideoStreamType.videoStreamHigh;
        await rtcEngine.setRemoteDefaultVideoStreamType(
          streamType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteDefaultVideoStreamType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteRemoteVideoStream',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const bool mute = true;
        await rtcEngine.muteRemoteVideoStream(
          uid: uid,
          mute: mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.muteRemoteVideoStream] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteVideoStreamType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const VideoStreamType streamType = VideoStreamType.videoStreamHigh;
        await rtcEngine.setRemoteVideoStreamType(
          uid: uid,
          streamType: streamType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteVideoStreamType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteVideoSubscriptionOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const VideoStreamType optionsType = VideoStreamType.videoStreamHigh;
        const bool optionsEncodedFrameOnly = true;
        const VideoSubscriptionOptions options = VideoSubscriptionOptions(
          type: optionsType,
          encodedFrameOnly: optionsEncodedFrameOnly,
        );
        await rtcEngine.setRemoteVideoSubscriptionOptions(
          uid: uid,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteVideoSubscriptionOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableAudioVolumeIndication',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int interval = 10;
        const int smooth = 10;
        const bool reportVad = true;
        await rtcEngine.enableAudioVolumeIndication(
          interval: interval,
          smooth: smooth,
          reportVad: reportVad,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableAudioVolumeIndication] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startAudioRecording',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioFileRecordingType configFileRecordingType =
            AudioFileRecordingType.audioFileRecordingMic;
        const AudioRecordingQualityType configQuality =
            AudioRecordingQualityType.audioRecordingQualityLow;
        const String configFilePath = "hello";
        const bool configEncode = true;
        const int configSampleRate = 10;
        const int configRecordingChannel = 10;
        const AudioRecordingConfiguration config = AudioRecordingConfiguration(
          filePath: configFilePath,
          encode: configEncode,
          sampleRate: configSampleRate,
          fileRecordingType: configFileRecordingType,
          quality: configQuality,
          recordingChannel: configRecordingChannel,
        );
        await rtcEngine.startAudioRecording(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startAudioRecording] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerAudioEncodedFrameObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioEncodedFrameObserverPosition configPostionType =
            AudioEncodedFrameObserverPosition
                .audioEncodedFrameObserverPositionRecord;
        const AudioEncodingType configEncodingType =
            AudioEncodingType.audioEncodingTypeAac16000Low;
        const AudioEncodedFrameObserverConfig config =
            AudioEncodedFrameObserverConfig(
          postionType: configPostionType,
          encodingType: configEncodingType,
        );
        final AudioEncodedFrameObserver observer = AudioEncodedFrameObserver(
          onRecordAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
          onPlaybackAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
          onMixedAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
        );
        rtcEngine.registerAudioEncodedFrameObserver(
          config: config,
          observer: observer,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.registerAudioEncodedFrameObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopAudioRecording',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopAudioRecording();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopAudioRecording] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startAudioMixing',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String filePath = "hello";
        const bool loopback = true;
        const int cycle = 10;
        const int startPos = 10;
        await rtcEngine.startAudioMixing(
          filePath: filePath,
          loopback: loopback,
          cycle: cycle,
          startPos: startPos,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startAudioMixing] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopAudioMixing',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopAudioMixing();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopAudioMixing] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.pauseAudioMixing',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.pauseAudioMixing();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.pauseAudioMixing] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.resumeAudioMixing',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.resumeAudioMixing();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.resumeAudioMixing] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.selectAudioTrack',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int index = 10;
        await rtcEngine.selectAudioTrack(
          index,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.selectAudioTrack] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioTrackCount',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioTrackCount();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getAudioTrackCount] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustAudioMixingVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustAudioMixingVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustAudioMixingVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustAudioMixingPublishVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustAudioMixingPublishVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustAudioMixingPublishVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioMixingPublishVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioMixingPublishVolume();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getAudioMixingPublishVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustAudioMixingPlayoutVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustAudioMixingPlayoutVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustAudioMixingPlayoutVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioMixingPlayoutVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioMixingPlayoutVolume();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getAudioMixingPlayoutVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioMixingDuration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioMixingDuration();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getAudioMixingDuration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioMixingCurrentPosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioMixingCurrentPosition();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getAudioMixingCurrentPosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioMixingPosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int pos = 10;
        await rtcEngine.setAudioMixingPosition(
          pos,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setAudioMixingPosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioMixingDualMonoMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioMixingDualMonoMode mode =
            AudioMixingDualMonoMode.audioMixingDualMonoAuto;
        await rtcEngine.setAudioMixingDualMonoMode(
          mode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setAudioMixingDualMonoMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioMixingPitch',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int pitch = 10;
        await rtcEngine.setAudioMixingPitch(
          pitch,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAudioMixingPitch] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getEffectsVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getEffectsVolume();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getEffectsVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEffectsVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.setEffectsVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setEffectsVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.preloadEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        const String filePath = "hello";
        const int startPos = 10;
        await rtcEngine.preloadEffect(
          soundId: soundId,
          filePath: filePath,
          startPos: startPos,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.preloadEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.playEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        const String filePath = "hello";
        const int loopCount = 10;
        const double pitch = 10.0;
        const double pan = 10.0;
        const int gain = 10;
        const bool publish = true;
        const int startPos = 10;
        await rtcEngine.playEffect(
          soundId: soundId,
          filePath: filePath,
          loopCount: loopCount,
          pitch: pitch,
          pan: pan,
          gain: gain,
          publish: publish,
          startPos: startPos,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.playEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.playAllEffects',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int loopCount = 10;
        const double pitch = 10.0;
        const double pan = 10.0;
        const int gain = 10;
        const bool publish = true;
        await rtcEngine.playAllEffects(
          loopCount: loopCount,
          pitch: pitch,
          pan: pan,
          gain: gain,
          publish: publish,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.playAllEffects] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getVolumeOfEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.getVolumeOfEffect(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getVolumeOfEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVolumeOfEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        const int volume = 10;
        await rtcEngine.setVolumeOfEffect(
          soundId: soundId,
          volume: volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setVolumeOfEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.pauseEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.pauseEffect(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.pauseEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.pauseAllEffects',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.pauseAllEffects();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.pauseAllEffects] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.resumeEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.resumeEffect(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.resumeEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.resumeAllEffects',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.resumeAllEffects();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.resumeAllEffects] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.stopEffect(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopAllEffects',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopAllEffects();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopAllEffects] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unloadEffect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.unloadEffect(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.unloadEffect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unloadAllEffects',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.unloadAllEffects();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.unloadAllEffects] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getEffectDuration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String filePath = "hello";
        await rtcEngine.getEffectDuration(
          filePath,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getEffectDuration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEffectPosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        const int pos = 10;
        await rtcEngine.setEffectPosition(
          soundId: soundId,
          pos: pos,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setEffectPosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getEffectCurrentPosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int soundId = 10;
        await rtcEngine.getEffectCurrentPosition(
          soundId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getEffectCurrentPosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableSoundPositionIndication',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableSoundPositionIndication(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableSoundPositionIndication] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteVoicePosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const double pan = 10.0;
        const double gain = 10.0;
        await rtcEngine.setRemoteVoicePosition(
          uid: uid,
          pan: pan,
          gain: gain,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteVoicePosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableSpatialAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableSpatialAudio(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableSpatialAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteUserSpatialAudioParams',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const double paramsSpeakerAzimuth = 10.0;
        const double paramsSpeakerElevation = 10.0;
        const double paramsSpeakerDistance = 10.0;
        const int paramsSpeakerOrientation = 10;
        const bool paramsEnableBlur = true;
        const bool paramsEnableAirAbsorb = true;
        const double paramsSpeakerAttenuation = 10.0;
        const bool paramsEnableDoppler = true;
        const SpatialAudioParams params = SpatialAudioParams(
          speakerAzimuth: paramsSpeakerAzimuth,
          speakerElevation: paramsSpeakerElevation,
          speakerDistance: paramsSpeakerDistance,
          speakerOrientation: paramsSpeakerOrientation,
          enableBlur: paramsEnableBlur,
          enableAirAbsorb: paramsEnableAirAbsorb,
          speakerAttenuation: paramsSpeakerAttenuation,
          enableDoppler: paramsEnableDoppler,
        );
        await rtcEngine.setRemoteUserSpatialAudioParams(
          uid: uid,
          params: params,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteUserSpatialAudioParams] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVoiceBeautifierPreset',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VoiceBeautifierPreset preset =
            VoiceBeautifierPreset.voiceBeautifierOff;
        await rtcEngine.setVoiceBeautifierPreset(
          preset,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVoiceBeautifierPreset] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioEffectPreset',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioEffectPreset preset = AudioEffectPreset.audioEffectOff;
        await rtcEngine.setAudioEffectPreset(
          preset,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAudioEffectPreset] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVoiceConversionPreset',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VoiceConversionPreset preset =
            VoiceConversionPreset.voiceConversionOff;
        await rtcEngine.setVoiceConversionPreset(
          preset,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVoiceConversionPreset] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioEffectParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioEffectPreset preset = AudioEffectPreset.audioEffectOff;
        const int param1 = 10;
        const int param2 = 10;
        await rtcEngine.setAudioEffectParameters(
          preset: preset,
          param1: param1,
          param2: param2,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setAudioEffectParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVoiceBeautifierParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VoiceBeautifierPreset preset =
            VoiceBeautifierPreset.voiceBeautifierOff;
        const int param1 = 10;
        const int param2 = 10;
        await rtcEngine.setVoiceBeautifierParameters(
          preset: preset,
          param1: param1,
          param2: param2,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVoiceBeautifierParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setVoiceConversionParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VoiceConversionPreset preset =
            VoiceConversionPreset.voiceConversionOff;
        const int param1 = 10;
        const int param2 = 10;
        await rtcEngine.setVoiceConversionParameters(
          preset: preset,
          param1: param1,
          param2: param2,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setVoiceConversionParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalVoicePitch',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double pitch = 10.0;
        await rtcEngine.setLocalVoicePitch(
          pitch,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLocalVoicePitch] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalVoiceFormant',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double formantRatio = 10.0;
        await rtcEngine.setLocalVoiceFormant(
          formantRatio,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLocalVoiceFormant] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalVoiceEqualization',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioEqualizationBandFrequency bandFrequency =
            AudioEqualizationBandFrequency.audioEqualizationBand31;
        const int bandGain = 10;
        await rtcEngine.setLocalVoiceEqualization(
          bandFrequency: bandFrequency,
          bandGain: bandGain,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setLocalVoiceEqualization] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalVoiceReverb',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioReverbType reverbKey = AudioReverbType.audioReverbDryLevel;
        const int value = 10;
        await rtcEngine.setLocalVoiceReverb(
          reverbKey: reverbKey,
          value: value,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLocalVoiceReverb] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setHeadphoneEQPreset',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const HeadphoneEqualizerPreset preset =
            HeadphoneEqualizerPreset.headphoneEqualizerOff;
        await rtcEngine.setHeadphoneEQPreset(
          preset,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setHeadphoneEQPreset] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setHeadphoneEQParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int lowGain = 10;
        const int highGain = 10;
        await rtcEngine.setHeadphoneEQParameters(
          lowGain: lowGain,
          highGain: highGain,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setHeadphoneEQParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLogFile',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String filePath = "hello";
        await rtcEngine.setLogFile(
          filePath,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLogFile] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLogFilter',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const LogFilterType filter = LogFilterType.logFilterOff;
        await rtcEngine.setLogFilter(
          filter,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLogFilter] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLogLevel',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const LogLevel level = LogLevel.logLevelNone;
        await rtcEngine.setLogLevel(
          level,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLogLevel] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLogFileSize',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int fileSizeInKBytes = 10;
        await rtcEngine.setLogFileSize(
          fileSizeInKBytes,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLogFileSize] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.uploadLogFile',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.uploadLogFile();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.uploadLogFile] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalRenderMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const RenderModeType renderMode = RenderModeType.renderModeHidden;
        const VideoMirrorModeType mirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        await rtcEngine.setLocalRenderMode(
          renderMode: renderMode,
          mirrorMode: mirrorMode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setLocalRenderMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteRenderMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const RenderModeType renderMode = RenderModeType.renderModeHidden;
        const VideoMirrorModeType mirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        await rtcEngine.setRemoteRenderMode(
          uid: uid,
          renderMode: renderMode,
          mirrorMode: mirrorMode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setRemoteRenderMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalVideoMirrorMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoMirrorModeType mirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        await rtcEngine.setLocalVideoMirrorMode(
          mirrorMode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setLocalVideoMirrorMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableDualStreamMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions streamConfigDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int streamConfigKBitrate = 10;
        const int streamConfigFramerate = 10;
        const SimulcastStreamConfig streamConfig = SimulcastStreamConfig(
          dimensions: streamConfigDimensions,
          kBitrate: streamConfigKBitrate,
          framerate: streamConfigFramerate,
        );
        await rtcEngine.enableDualStreamMode(
          enabled: enabled,
          streamConfig: streamConfig,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableDualStreamMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDualStreamMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const SimulcastStreamMode mode =
            SimulcastStreamMode.autoSimulcastStream;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions streamConfigDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int streamConfigKBitrate = 10;
        const int streamConfigFramerate = 10;
        const SimulcastStreamConfig streamConfig = SimulcastStreamConfig(
          dimensions: streamConfigDimensions,
          kBitrate: streamConfigKBitrate,
          framerate: streamConfigFramerate,
        );
        await rtcEngine.setDualStreamMode(
          mode: mode,
          streamConfig: streamConfig,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setDualStreamMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableCustomAudioLocalPlayback',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int trackId = 10;
        const bool enabled = true;
        await rtcEngine.enableCustomAudioLocalPlayback(
          trackId: trackId,
          enabled: enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableCustomAudioLocalPlayback] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRecordingAudioFrameParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int sampleRate = 10;
        const int channel = 10;
        const RawAudioFrameOpModeType mode =
            RawAudioFrameOpModeType.rawAudioFrameOpModeReadOnly;
        const int samplesPerCall = 10;
        await rtcEngine.setRecordingAudioFrameParameters(
          sampleRate: sampleRate,
          channel: channel,
          mode: mode,
          samplesPerCall: samplesPerCall,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRecordingAudioFrameParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setPlaybackAudioFrameParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int sampleRate = 10;
        const int channel = 10;
        const RawAudioFrameOpModeType mode =
            RawAudioFrameOpModeType.rawAudioFrameOpModeReadOnly;
        const int samplesPerCall = 10;
        await rtcEngine.setPlaybackAudioFrameParameters(
          sampleRate: sampleRate,
          channel: channel,
          mode: mode,
          samplesPerCall: samplesPerCall,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setPlaybackAudioFrameParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setMixedAudioFrameParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int sampleRate = 10;
        const int channel = 10;
        const int samplesPerCall = 10;
        await rtcEngine.setMixedAudioFrameParameters(
          sampleRate: sampleRate,
          channel: channel,
          samplesPerCall: samplesPerCall,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setMixedAudioFrameParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEarMonitoringAudioFrameParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int sampleRate = 10;
        const int channel = 10;
        const RawAudioFrameOpModeType mode =
            RawAudioFrameOpModeType.rawAudioFrameOpModeReadOnly;
        const int samplesPerCall = 10;
        await rtcEngine.setEarMonitoringAudioFrameParameters(
          sampleRate: sampleRate,
          channel: channel,
          mode: mode,
          samplesPerCall: samplesPerCall,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setEarMonitoringAudioFrameParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setPlaybackAudioFrameBeforeMixingParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int sampleRate = 10;
        const int channel = 10;
        await rtcEngine.setPlaybackAudioFrameBeforeMixingParameters(
          sampleRate: sampleRate,
          channel: channel,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setPlaybackAudioFrameBeforeMixingParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableAudioSpectrumMonitor',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int intervalInMS = 10;
        await rtcEngine.enableAudioSpectrumMonitor(
          intervalInMS: intervalInMS,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableAudioSpectrumMonitor] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.disableAudioSpectrumMonitor',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.disableAudioSpectrumMonitor();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.disableAudioSpectrumMonitor] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerAudioSpectrumObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final AudioSpectrumObserver observer = AudioSpectrumObserver(
          onLocalAudioSpectrum: (AudioSpectrumData data) {},
          onRemoteAudioSpectrum: (List spectrums, int spectrumNumber) {},
        );
        rtcEngine.registerAudioSpectrumObserver(
          observer,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.registerAudioSpectrumObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unregisterAudioSpectrumObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final AudioSpectrumObserver observer = AudioSpectrumObserver(
          onLocalAudioSpectrum: (AudioSpectrumData data) {},
          onRemoteAudioSpectrum: (List spectrums, int spectrumNumber) {},
        );
        rtcEngine.unregisterAudioSpectrumObserver(
          observer,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.unregisterAudioSpectrumObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustRecordingSignalVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustRecordingSignalVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustRecordingSignalVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.muteRecordingSignal',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool mute = true;
        await rtcEngine.muteRecordingSignal(
          mute,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.muteRecordingSignal] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustPlaybackSignalVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustPlaybackSignalVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustPlaybackSignalVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustUserPlaybackSignalVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const int volume = 10;
        await rtcEngine.adjustUserPlaybackSignalVolume(
          uid: uid,
          volume: volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustUserPlaybackSignalVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setLocalPublishFallbackOption',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const StreamFallbackOptions option =
            StreamFallbackOptions.streamFallbackOptionDisabled;
        await rtcEngine.setLocalPublishFallbackOption(
          option,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setLocalPublishFallbackOption] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteSubscribeFallbackOption',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const StreamFallbackOptions option =
            StreamFallbackOptions.streamFallbackOptionDisabled;
        await rtcEngine.setRemoteSubscribeFallbackOption(
          option,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteSubscribeFallbackOption] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableExtension',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String provider = "hello";
        const String extension = "hello";
        const bool enable = true;
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.enableExtension(
          provider: provider,
          extension: extension,
          enable: enable,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableExtension] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setExtensionProperty',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String provider = "hello";
        const String extension = "hello";
        const String key = "hello";
        const String value = "hello";
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.setExtensionProperty(
          provider: provider,
          extension: extension,
          key: key,
          value: value,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setExtensionProperty] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getExtensionProperty',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String provider = "hello";
        const String extension = "hello";
        const String key = "hello";
        const int bufLen = 10;
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.getExtensionProperty(
          provider: provider,
          extension: extension,
          key: key,
          bufLen: bufLen,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getExtensionProperty] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableLoopbackRecording',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const String deviceName = "hello";
        await rtcEngine.enableLoopbackRecording(
          enabled: enabled,
          deviceName: deviceName,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableLoopbackRecording] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustLoopbackSignalVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.adjustLoopbackSignalVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustLoopbackSignalVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getLoopbackRecordingVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getLoopbackRecordingVolume();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getLoopbackRecordingVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableInEarMonitoring',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const EarMonitoringFilterType includeAudioFilters =
            EarMonitoringFilterType.earMonitoringFilterNone;
        await rtcEngine.enableInEarMonitoring(
          enabled: enabled,
          includeAudioFilters: includeAudioFilters,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableInEarMonitoring] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setInEarMonitoringVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int volume = 10;
        await rtcEngine.setInEarMonitoringVolume(
          volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setInEarMonitoringVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.loadExtensionProvider',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String path = "hello";
        const bool unloadAfterUse = true;
        await rtcEngine.loadExtensionProvider(
          path: path,
          unloadAfterUse: unloadAfterUse,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.loadExtensionProvider] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setExtensionProviderProperty',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String provider = "hello";
        const String key = "hello";
        const String value = "hello";
        await rtcEngine.setExtensionProviderProperty(
          provider: provider,
          key: key,
          value: value,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setExtensionProviderProperty] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerExtension',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String provider = "hello";
        const String extension = "hello";
        const MediaSourceType type = MediaSourceType.audioPlayoutSource;
        await rtcEngine.registerExtension(
          provider: provider,
          extension: extension,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.registerExtension] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraCapturerConfiguration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const CameraDirection configCameraDirection =
            CameraDirection.cameraRear;
        const int formatWidth = 10;
        const int formatHeight = 10;
        const int formatFps = 10;
        const VideoFormat configFormat = VideoFormat(
          width: formatWidth,
          height: formatHeight,
          fps: formatFps,
        );
        const String configDeviceId = "hello";
        const bool configFollowEncodeDimensionRatio = true;
        const CameraCapturerConfiguration config = CameraCapturerConfiguration(
          cameraDirection: configCameraDirection,
          deviceId: configDeviceId,
          format: configFormat,
          followEncodeDimensionRatio: configFollowEncodeDimensionRatio,
        );
        await rtcEngine.setCameraCapturerConfiguration(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraCapturerConfiguration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.destroyCustomVideoTrack',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int videoTrackId = 10;
        await rtcEngine.destroyCustomVideoTrack(
          videoTrackId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.destroyCustomVideoTrack] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.destroyCustomEncodedVideoTrack',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int videoTrackId = 10;
        await rtcEngine.destroyCustomEncodedVideoTrack(
          videoTrackId,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.destroyCustomEncodedVideoTrack] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.switchCamera',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.switchCamera();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.switchCamera] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraZoomSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraZoomSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraZoomSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraFaceDetectSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraFaceDetectSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraFaceDetectSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraTorchSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraTorchSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraTorchSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraFocusSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraFocusSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraFocusSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraAutoFocusFaceModeSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraAutoFocusFaceModeSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraAutoFocusFaceModeSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraZoomFactor',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double factor = 10.0;
        await rtcEngine.setCameraZoomFactor(
          factor,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setCameraZoomFactor] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableFaceDetection',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableFaceDetection(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableFaceDetection] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getCameraMaxZoomFactor',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getCameraMaxZoomFactor();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getCameraMaxZoomFactor] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraFocusPositionInPreview',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double positionX = 10.0;
        const double positionY = 10.0;
        await rtcEngine.setCameraFocusPositionInPreview(
          positionX: positionX,
          positionY: positionY,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraFocusPositionInPreview] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraTorchOn',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool isOn = true;
        await rtcEngine.setCameraTorchOn(
          isOn,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setCameraTorchOn] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraAutoFocusFaceModeEnabled',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.setCameraAutoFocusFaceModeEnabled(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraAutoFocusFaceModeEnabled] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraExposurePositionSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraExposurePositionSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraExposurePositionSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraExposurePosition',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double positionXinView = 10.0;
        const double positionYinView = 10.0;
        await rtcEngine.setCameraExposurePosition(
          positionXinView: positionXinView,
          positionYinView: positionYinView,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraExposurePosition] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraExposureSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraExposureSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraExposureSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraExposureFactor',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const double factor = 10.0;
        await rtcEngine.setCameraExposureFactor(
          factor,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraExposureFactor] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isCameraAutoExposureFaceModeSupported',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isCameraAutoExposureFaceModeSupported();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isCameraAutoExposureFaceModeSupported] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraAutoExposureFaceModeEnabled',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.setCameraAutoExposureFaceModeEnabled(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraAutoExposureFaceModeEnabled] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDefaultAudioRouteToSpeakerphone',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool defaultToSpeaker = true;
        await rtcEngine.setDefaultAudioRouteToSpeakerphone(
          defaultToSpeaker,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setDefaultAudioRouteToSpeakerphone] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEnableSpeakerphone',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool speakerOn = true;
        await rtcEngine.setEnableSpeakerphone(
          speakerOn,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setEnableSpeakerphone] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isSpeakerphoneEnabled',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.isSpeakerphoneEnabled();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isSpeakerphoneEnabled] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRouteInCommunicationMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int route = 10;
        await rtcEngine.setRouteInCommunicationMode(
          route,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRouteInCommunicationMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getScreenCaptureSources',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int thumbSizeWidth = 10;
        const int thumbSizeHeight = 10;
        const SIZE thumbSize = SIZE(
          width: thumbSizeWidth,
          height: thumbSizeHeight,
        );
        const int iconSizeWidth = 10;
        const int iconSizeHeight = 10;
        const SIZE iconSize = SIZE(
          width: iconSizeWidth,
          height: iconSizeHeight,
        );
        const bool includeScreen = true;
        await rtcEngine.getScreenCaptureSources(
          thumbSize: thumbSize,
          iconSize: iconSize,
          includeScreen: includeScreen,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getScreenCaptureSources] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAudioSessionOperationRestriction',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioSessionOperationRestriction restriction =
            AudioSessionOperationRestriction
                .audioSessionOperationRestrictionNone;
        await rtcEngine.setAudioSessionOperationRestriction(
          restriction,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setAudioSessionOperationRestriction] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startScreenCaptureByDisplayId',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int displayId = 10;
        const int regionRectX = 10;
        const int regionRectY = 10;
        const int regionRectWidth = 10;
        const int regionRectHeight = 10;
        const Rectangle regionRect = Rectangle(
          x: regionRectX,
          y: regionRectY,
          width: regionRectWidth,
          height: regionRectHeight,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions captureParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int captureParamsFrameRate = 10;
        const int captureParamsBitrate = 10;
        const bool captureParamsCaptureMouseCursor = true;
        const bool captureParamsWindowFocus = true;
        const List<int> captureParamsExcludeWindowList = [];
        const int captureParamsExcludeWindowCount = 10;
        const int captureParamsHighLightWidth = 10;
        const int captureParamsHighLightColor = 10;
        const bool captureParamsEnableHighLight = true;
        const ScreenCaptureParameters captureParams = ScreenCaptureParameters(
          dimensions: captureParamsDimensions,
          frameRate: captureParamsFrameRate,
          bitrate: captureParamsBitrate,
          captureMouseCursor: captureParamsCaptureMouseCursor,
          windowFocus: captureParamsWindowFocus,
          excludeWindowList: captureParamsExcludeWindowList,
          excludeWindowCount: captureParamsExcludeWindowCount,
          highLightWidth: captureParamsHighLightWidth,
          highLightColor: captureParamsHighLightColor,
          enableHighLight: captureParamsEnableHighLight,
        );
        await rtcEngine.startScreenCaptureByDisplayId(
          displayId: displayId,
          regionRect: regionRect,
          captureParams: captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startScreenCaptureByDisplayId] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startScreenCaptureByScreenRect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int screenRectX = 10;
        const int screenRectY = 10;
        const int screenRectWidth = 10;
        const int screenRectHeight = 10;
        const Rectangle screenRect = Rectangle(
          x: screenRectX,
          y: screenRectY,
          width: screenRectWidth,
          height: screenRectHeight,
        );
        const int regionRectX = 10;
        const int regionRectY = 10;
        const int regionRectWidth = 10;
        const int regionRectHeight = 10;
        const Rectangle regionRect = Rectangle(
          x: regionRectX,
          y: regionRectY,
          width: regionRectWidth,
          height: regionRectHeight,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions captureParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int captureParamsFrameRate = 10;
        const int captureParamsBitrate = 10;
        const bool captureParamsCaptureMouseCursor = true;
        const bool captureParamsWindowFocus = true;
        const List<int> captureParamsExcludeWindowList = [];
        const int captureParamsExcludeWindowCount = 10;
        const int captureParamsHighLightWidth = 10;
        const int captureParamsHighLightColor = 10;
        const bool captureParamsEnableHighLight = true;
        const ScreenCaptureParameters captureParams = ScreenCaptureParameters(
          dimensions: captureParamsDimensions,
          frameRate: captureParamsFrameRate,
          bitrate: captureParamsBitrate,
          captureMouseCursor: captureParamsCaptureMouseCursor,
          windowFocus: captureParamsWindowFocus,
          excludeWindowList: captureParamsExcludeWindowList,
          excludeWindowCount: captureParamsExcludeWindowCount,
          highLightWidth: captureParamsHighLightWidth,
          highLightColor: captureParamsHighLightColor,
          enableHighLight: captureParamsEnableHighLight,
        );
        await rtcEngine.startScreenCaptureByScreenRect(
          screenRect: screenRect,
          regionRect: regionRect,
          captureParams: captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startScreenCaptureByScreenRect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioDeviceInfo',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getAudioDeviceInfo();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getAudioDeviceInfo] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startScreenCaptureByWindowId',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int windowId = 10;
        const int regionRectX = 10;
        const int regionRectY = 10;
        const int regionRectWidth = 10;
        const int regionRectHeight = 10;
        const Rectangle regionRect = Rectangle(
          x: regionRectX,
          y: regionRectY,
          width: regionRectWidth,
          height: regionRectHeight,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions captureParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int captureParamsFrameRate = 10;
        const int captureParamsBitrate = 10;
        const bool captureParamsCaptureMouseCursor = true;
        const bool captureParamsWindowFocus = true;
        const List<int> captureParamsExcludeWindowList = [];
        const int captureParamsExcludeWindowCount = 10;
        const int captureParamsHighLightWidth = 10;
        const int captureParamsHighLightColor = 10;
        const bool captureParamsEnableHighLight = true;
        const ScreenCaptureParameters captureParams = ScreenCaptureParameters(
          dimensions: captureParamsDimensions,
          frameRate: captureParamsFrameRate,
          bitrate: captureParamsBitrate,
          captureMouseCursor: captureParamsCaptureMouseCursor,
          windowFocus: captureParamsWindowFocus,
          excludeWindowList: captureParamsExcludeWindowList,
          excludeWindowCount: captureParamsExcludeWindowCount,
          highLightWidth: captureParamsHighLightWidth,
          highLightColor: captureParamsHighLightColor,
          enableHighLight: captureParamsEnableHighLight,
        );
        await rtcEngine.startScreenCaptureByWindowId(
          windowId: windowId,
          regionRect: regionRect,
          captureParams: captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startScreenCaptureByWindowId] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setScreenCaptureContentHint',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoContentHint contentHint = VideoContentHint.contentHintNone;
        await rtcEngine.setScreenCaptureContentHint(
          contentHint,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setScreenCaptureContentHint] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateScreenCaptureRegion',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int regionRectX = 10;
        const int regionRectY = 10;
        const int regionRectWidth = 10;
        const int regionRectHeight = 10;
        const Rectangle regionRect = Rectangle(
          x: regionRectX,
          y: regionRectY,
          width: regionRectWidth,
          height: regionRectHeight,
        );
        await rtcEngine.updateScreenCaptureRegion(
          regionRect,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateScreenCaptureRegion] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateScreenCaptureParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions captureParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int captureParamsFrameRate = 10;
        const int captureParamsBitrate = 10;
        const bool captureParamsCaptureMouseCursor = true;
        const bool captureParamsWindowFocus = true;
        const List<int> captureParamsExcludeWindowList = [];
        const int captureParamsExcludeWindowCount = 10;
        const int captureParamsHighLightWidth = 10;
        const int captureParamsHighLightColor = 10;
        const bool captureParamsEnableHighLight = true;
        const ScreenCaptureParameters captureParams = ScreenCaptureParameters(
          dimensions: captureParamsDimensions,
          frameRate: captureParamsFrameRate,
          bitrate: captureParamsBitrate,
          captureMouseCursor: captureParamsCaptureMouseCursor,
          windowFocus: captureParamsWindowFocus,
          excludeWindowList: captureParamsExcludeWindowList,
          excludeWindowCount: captureParamsExcludeWindowCount,
          highLightWidth: captureParamsHighLightWidth,
          highLightColor: captureParamsHighLightColor,
          enableHighLight: captureParamsEnableHighLight,
        );
        await rtcEngine.updateScreenCaptureParameters(
          captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateScreenCaptureParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startScreenCapture',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int audioParamsSampleRate = 10;
        const int audioParamsChannels = 10;
        const int audioParamsCaptureSignalVolume = 10;
        const ScreenAudioParameters captureParamsAudioParams =
            ScreenAudioParameters(
          sampleRate: audioParamsSampleRate,
          channels: audioParamsChannels,
          captureSignalVolume: audioParamsCaptureSignalVolume,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions videoParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const VideoContentHint videoParamsContentHint =
            VideoContentHint.contentHintNone;
        const int videoParamsFrameRate = 10;
        const int videoParamsBitrate = 10;
        const ScreenVideoParameters captureParamsVideoParams =
            ScreenVideoParameters(
          dimensions: videoParamsDimensions,
          frameRate: videoParamsFrameRate,
          bitrate: videoParamsBitrate,
          contentHint: videoParamsContentHint,
        );
        const bool captureParamsCaptureAudio = true;
        const bool captureParamsCaptureVideo = true;
        const ScreenCaptureParameters2 captureParams = ScreenCaptureParameters2(
          captureAudio: captureParamsCaptureAudio,
          audioParams: captureParamsAudioParams,
          captureVideo: captureParamsCaptureVideo,
          videoParams: captureParamsVideoParams,
        );
        await rtcEngine.startScreenCapture(
          captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startScreenCapture] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startScreenCaptureBySourceType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        const int screenRectX = 10;
        const int screenRectY = 10;
        const int screenRectWidth = 10;
        const int screenRectHeight = 10;
        const Rectangle configScreenRect = Rectangle(
          x: screenRectX,
          y: screenRectY,
          width: screenRectWidth,
          height: screenRectHeight,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions paramsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const int paramsFrameRate = 10;
        const int paramsBitrate = 10;
        const bool paramsCaptureMouseCursor = true;
        const bool paramsWindowFocus = true;
        const List<int> paramsExcludeWindowList = [];
        const int paramsExcludeWindowCount = 10;
        const int paramsHighLightWidth = 10;
        const int paramsHighLightColor = 10;
        const bool paramsEnableHighLight = true;
        const ScreenCaptureParameters configParams = ScreenCaptureParameters(
          dimensions: paramsDimensions,
          frameRate: paramsFrameRate,
          bitrate: paramsBitrate,
          captureMouseCursor: paramsCaptureMouseCursor,
          windowFocus: paramsWindowFocus,
          excludeWindowList: paramsExcludeWindowList,
          excludeWindowCount: paramsExcludeWindowCount,
          highLightWidth: paramsHighLightWidth,
          highLightColor: paramsHighLightColor,
          enableHighLight: paramsEnableHighLight,
        );
        const int regionRectX = 10;
        const int regionRectY = 10;
        const int regionRectWidth = 10;
        const int regionRectHeight = 10;
        const Rectangle configRegionRect = Rectangle(
          x: regionRectX,
          y: regionRectY,
          width: regionRectWidth,
          height: regionRectHeight,
        );
        const bool configIsCaptureWindow = true;
        const int configDisplayId = 10;
        const int configWindowId = 10;
        const ScreenCaptureConfiguration config = ScreenCaptureConfiguration(
          isCaptureWindow: configIsCaptureWindow,
          displayId: configDisplayId,
          screenRect: configScreenRect,
          windowId: configWindowId,
          params: configParams,
          regionRect: configRegionRect,
        );
        await rtcEngine.startScreenCaptureBySourceType(
          sourceType: sourceType,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startScreenCaptureBySourceType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateScreenCapture',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int audioParamsSampleRate = 10;
        const int audioParamsChannels = 10;
        const int audioParamsCaptureSignalVolume = 10;
        const ScreenAudioParameters captureParamsAudioParams =
            ScreenAudioParameters(
          sampleRate: audioParamsSampleRate,
          channels: audioParamsChannels,
          captureSignalVolume: audioParamsCaptureSignalVolume,
        );
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions videoParamsDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const VideoContentHint videoParamsContentHint =
            VideoContentHint.contentHintNone;
        const int videoParamsFrameRate = 10;
        const int videoParamsBitrate = 10;
        const ScreenVideoParameters captureParamsVideoParams =
            ScreenVideoParameters(
          dimensions: videoParamsDimensions,
          frameRate: videoParamsFrameRate,
          bitrate: videoParamsBitrate,
          contentHint: videoParamsContentHint,
        );
        const bool captureParamsCaptureAudio = true;
        const bool captureParamsCaptureVideo = true;
        const ScreenCaptureParameters2 captureParams = ScreenCaptureParameters2(
          captureAudio: captureParamsCaptureAudio,
          audioParams: captureParamsAudioParams,
          captureVideo: captureParamsCaptureVideo,
          videoParams: captureParamsVideoParams,
        );
        await rtcEngine.updateScreenCapture(
          captureParams,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.updateScreenCapture] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.queryScreenCaptureCapability',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.queryScreenCaptureCapability();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.queryScreenCaptureCapability] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setScreenCaptureScenario',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const ScreenScenarioType screenScenario =
            ScreenScenarioType.screenScenarioDocument;
        await rtcEngine.setScreenCaptureScenario(
          screenScenario,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setScreenCaptureScenario] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopScreenCapture',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopScreenCapture();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopScreenCapture] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopScreenCaptureBySourceType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        await rtcEngine.stopScreenCaptureBySourceType(
          sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.stopScreenCaptureBySourceType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getCallId',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getCallId();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getCallId] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.rate',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String callId = "hello";
        const int rating = 10;
        const String description = "hello";
        await rtcEngine.rate(
          callId: callId,
          rating: rating,
          description: description,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.rate] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.complain',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String callId = "hello";
        const String description = "hello";
        await rtcEngine.complain(
          callId: callId,
          description: description,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.complain] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startRtmpStreamWithoutTranscoding',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String url = "hello";
        await rtcEngine.startRtmpStreamWithoutTranscoding(
          url,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startRtmpStreamWithoutTranscoding] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startRtmpStreamWithTranscoding',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String url = "hello";
        const VideoCodecProfileType transcodingVideoCodecProfile =
            VideoCodecProfileType.videoCodecProfileBaseline;
        const VideoCodecTypeForStream transcodingVideoCodecType =
            VideoCodecTypeForStream.videoCodecH264ForStream;
        const AudioSampleRateType transcodingAudioSampleRate =
            AudioSampleRateType.audioSampleRate32000;
        const AudioCodecProfileType transcodingAudioCodecProfile =
            AudioCodecProfileType.audioCodecProfileLcAac;
        const int transcodingWidth = 10;
        const int transcodingHeight = 10;
        const int transcodingVideoBitrate = 10;
        const int transcodingVideoFramerate = 10;
        const bool transcodingLowLatency = true;
        const int transcodingVideoGop = 10;
        const int transcodingBackgroundColor = 10;
        const int transcodingUserCount = 10;
        const List<TranscodingUser> transcodingTranscodingUsers = [];
        const String transcodingTranscodingExtraInfo = "hello";
        const String transcodingMetadata = "hello";
        const List<RtcImage> transcodingWatermark = [];
        const int transcodingWatermarkCount = 10;
        const List<RtcImage> transcodingBackgroundImage = [];
        const int transcodingBackgroundImageCount = 10;
        const int transcodingAudioBitrate = 10;
        const int transcodingAudioChannels = 10;
        const List<LiveStreamAdvancedFeature> transcodingAdvancedFeatures = [];
        const int transcodingAdvancedFeatureCount = 10;
        const LiveTranscoding transcoding = LiveTranscoding(
          width: transcodingWidth,
          height: transcodingHeight,
          videoBitrate: transcodingVideoBitrate,
          videoFramerate: transcodingVideoFramerate,
          lowLatency: transcodingLowLatency,
          videoGop: transcodingVideoGop,
          videoCodecProfile: transcodingVideoCodecProfile,
          backgroundColor: transcodingBackgroundColor,
          videoCodecType: transcodingVideoCodecType,
          userCount: transcodingUserCount,
          transcodingUsers: transcodingTranscodingUsers,
          transcodingExtraInfo: transcodingTranscodingExtraInfo,
          metadata: transcodingMetadata,
          watermark: transcodingWatermark,
          watermarkCount: transcodingWatermarkCount,
          backgroundImage: transcodingBackgroundImage,
          backgroundImageCount: transcodingBackgroundImageCount,
          audioSampleRate: transcodingAudioSampleRate,
          audioBitrate: transcodingAudioBitrate,
          audioChannels: transcodingAudioChannels,
          audioCodecProfile: transcodingAudioCodecProfile,
          advancedFeatures: transcodingAdvancedFeatures,
          advancedFeatureCount: transcodingAdvancedFeatureCount,
        );
        await rtcEngine.startRtmpStreamWithTranscoding(
          url: url,
          transcoding: transcoding,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startRtmpStreamWithTranscoding] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateRtmpTranscoding',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoCodecProfileType transcodingVideoCodecProfile =
            VideoCodecProfileType.videoCodecProfileBaseline;
        const VideoCodecTypeForStream transcodingVideoCodecType =
            VideoCodecTypeForStream.videoCodecH264ForStream;
        const AudioSampleRateType transcodingAudioSampleRate =
            AudioSampleRateType.audioSampleRate32000;
        const AudioCodecProfileType transcodingAudioCodecProfile =
            AudioCodecProfileType.audioCodecProfileLcAac;
        const int transcodingWidth = 10;
        const int transcodingHeight = 10;
        const int transcodingVideoBitrate = 10;
        const int transcodingVideoFramerate = 10;
        const bool transcodingLowLatency = true;
        const int transcodingVideoGop = 10;
        const int transcodingBackgroundColor = 10;
        const int transcodingUserCount = 10;
        const List<TranscodingUser> transcodingTranscodingUsers = [];
        const String transcodingTranscodingExtraInfo = "hello";
        const String transcodingMetadata = "hello";
        const List<RtcImage> transcodingWatermark = [];
        const int transcodingWatermarkCount = 10;
        const List<RtcImage> transcodingBackgroundImage = [];
        const int transcodingBackgroundImageCount = 10;
        const int transcodingAudioBitrate = 10;
        const int transcodingAudioChannels = 10;
        const List<LiveStreamAdvancedFeature> transcodingAdvancedFeatures = [];
        const int transcodingAdvancedFeatureCount = 10;
        const LiveTranscoding transcoding = LiveTranscoding(
          width: transcodingWidth,
          height: transcodingHeight,
          videoBitrate: transcodingVideoBitrate,
          videoFramerate: transcodingVideoFramerate,
          lowLatency: transcodingLowLatency,
          videoGop: transcodingVideoGop,
          videoCodecProfile: transcodingVideoCodecProfile,
          backgroundColor: transcodingBackgroundColor,
          videoCodecType: transcodingVideoCodecType,
          userCount: transcodingUserCount,
          transcodingUsers: transcodingTranscodingUsers,
          transcodingExtraInfo: transcodingTranscodingExtraInfo,
          metadata: transcodingMetadata,
          watermark: transcodingWatermark,
          watermarkCount: transcodingWatermarkCount,
          backgroundImage: transcodingBackgroundImage,
          backgroundImageCount: transcodingBackgroundImageCount,
          audioSampleRate: transcodingAudioSampleRate,
          audioBitrate: transcodingAudioBitrate,
          audioChannels: transcodingAudioChannels,
          audioCodecProfile: transcodingAudioCodecProfile,
          advancedFeatures: transcodingAdvancedFeatures,
          advancedFeatureCount: transcodingAdvancedFeatureCount,
        );
        await rtcEngine.updateRtmpTranscoding(
          transcoding,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateRtmpTranscoding] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startLocalVideoTranscoder',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoCodecType videoOutputConfigurationCodecType =
            VideoCodecType.videoCodecNone;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions videoOutputConfigurationDimensions =
            VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const OrientationMode videoOutputConfigurationOrientationMode =
            OrientationMode.orientationModeAdaptive;
        const DegradationPreference
            videoOutputConfigurationDegradationPreference =
            DegradationPreference.maintainQuality;
        const VideoMirrorModeType videoOutputConfigurationMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const EncodingPreference advanceOptionsEncodingPreference =
            EncodingPreference.preferAuto;
        const CompressionPreference advanceOptionsCompressionPreference =
            CompressionPreference.preferLowLatency;
        const AdvanceOptions videoOutputConfigurationAdvanceOptions =
            AdvanceOptions(
          encodingPreference: advanceOptionsEncodingPreference,
          compressionPreference: advanceOptionsCompressionPreference,
        );
        const int videoOutputConfigurationFrameRate = 10;
        const int videoOutputConfigurationBitrate = 10;
        const int videoOutputConfigurationMinBitrate = 10;
        const VideoEncoderConfiguration configVideoOutputConfiguration =
            VideoEncoderConfiguration(
          codecType: videoOutputConfigurationCodecType,
          dimensions: videoOutputConfigurationDimensions,
          frameRate: videoOutputConfigurationFrameRate,
          bitrate: videoOutputConfigurationBitrate,
          minBitrate: videoOutputConfigurationMinBitrate,
          orientationMode: videoOutputConfigurationOrientationMode,
          degradationPreference: videoOutputConfigurationDegradationPreference,
          mirrorMode: videoOutputConfigurationMirrorMode,
          advanceOptions: videoOutputConfigurationAdvanceOptions,
        );
        const int configStreamCount = 10;
        const List<TranscodingVideoStream> configVideoInputStreams = [];
        const bool configSyncWithPrimaryCamera = true;
        const LocalTranscoderConfiguration config =
            LocalTranscoderConfiguration(
          streamCount: configStreamCount,
          videoInputStreams: configVideoInputStreams,
          videoOutputConfiguration: configVideoOutputConfiguration,
          syncWithPrimaryCamera: configSyncWithPrimaryCamera,
        );
        await rtcEngine.startLocalVideoTranscoder(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startLocalVideoTranscoder] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateLocalTranscoderConfiguration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoCodecType videoOutputConfigurationCodecType =
            VideoCodecType.videoCodecNone;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions videoOutputConfigurationDimensions =
            VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const OrientationMode videoOutputConfigurationOrientationMode =
            OrientationMode.orientationModeAdaptive;
        const DegradationPreference
            videoOutputConfigurationDegradationPreference =
            DegradationPreference.maintainQuality;
        const VideoMirrorModeType videoOutputConfigurationMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const EncodingPreference advanceOptionsEncodingPreference =
            EncodingPreference.preferAuto;
        const CompressionPreference advanceOptionsCompressionPreference =
            CompressionPreference.preferLowLatency;
        const AdvanceOptions videoOutputConfigurationAdvanceOptions =
            AdvanceOptions(
          encodingPreference: advanceOptionsEncodingPreference,
          compressionPreference: advanceOptionsCompressionPreference,
        );
        const int videoOutputConfigurationFrameRate = 10;
        const int videoOutputConfigurationBitrate = 10;
        const int videoOutputConfigurationMinBitrate = 10;
        const VideoEncoderConfiguration configVideoOutputConfiguration =
            VideoEncoderConfiguration(
          codecType: videoOutputConfigurationCodecType,
          dimensions: videoOutputConfigurationDimensions,
          frameRate: videoOutputConfigurationFrameRate,
          bitrate: videoOutputConfigurationBitrate,
          minBitrate: videoOutputConfigurationMinBitrate,
          orientationMode: videoOutputConfigurationOrientationMode,
          degradationPreference: videoOutputConfigurationDegradationPreference,
          mirrorMode: videoOutputConfigurationMirrorMode,
          advanceOptions: videoOutputConfigurationAdvanceOptions,
        );
        const int configStreamCount = 10;
        const List<TranscodingVideoStream> configVideoInputStreams = [];
        const bool configSyncWithPrimaryCamera = true;
        const LocalTranscoderConfiguration config =
            LocalTranscoderConfiguration(
          streamCount: configStreamCount,
          videoInputStreams: configVideoInputStreams,
          videoOutputConfiguration: configVideoOutputConfiguration,
          syncWithPrimaryCamera: configSyncWithPrimaryCamera,
        );
        await rtcEngine.updateLocalTranscoderConfiguration(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateLocalTranscoderConfiguration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopRtmpStream',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String url = "hello";
        await rtcEngine.stopRtmpStream(
          url,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopRtmpStream] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopLocalVideoTranscoder',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopLocalVideoTranscoder();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.stopLocalVideoTranscoder] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startCameraCapture',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        const CameraDirection configCameraDirection =
            CameraDirection.cameraRear;
        const int formatWidth = 10;
        const int formatHeight = 10;
        const int formatFps = 10;
        const VideoFormat configFormat = VideoFormat(
          width: formatWidth,
          height: formatHeight,
          fps: formatFps,
        );
        const String configDeviceId = "hello";
        const bool configFollowEncodeDimensionRatio = true;
        const CameraCapturerConfiguration config = CameraCapturerConfiguration(
          cameraDirection: configCameraDirection,
          deviceId: configDeviceId,
          format: configFormat,
          followEncodeDimensionRatio: configFollowEncodeDimensionRatio,
        );
        await rtcEngine.startCameraCapture(
          sourceType: sourceType,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startCameraCapture] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopCameraCapture',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        await rtcEngine.stopCameraCapture(
          sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopCameraCapture] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCameraDeviceOrientation',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType type = VideoSourceType.videoSourceCameraPrimary;
        const VideoOrientation orientation = VideoOrientation.videoOrientation0;
        await rtcEngine.setCameraDeviceOrientation(
          type: type,
          orientation: orientation,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setCameraDeviceOrientation] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setScreenCaptureOrientation',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoSourceType type = VideoSourceType.videoSourceCameraPrimary;
        const VideoOrientation orientation = VideoOrientation.videoOrientation0;
        await rtcEngine.setScreenCaptureOrientation(
          type: type,
          orientation: orientation,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setScreenCaptureOrientation] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getConnectionState',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getConnectionState();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getConnectionState] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerEventHandler',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final RtcEngineEventHandler eventHandler = RtcEngineEventHandler(
          onJoinChannelSuccess: (RtcConnection connection, int elapsed) {},
          onRejoinChannelSuccess: (RtcConnection connection, int elapsed) {},
          onProxyConnected: (String channel, int uid, ProxyType proxyType,
              String localProxyIp, int elapsed) {},
          onError: (ErrorCodeType err, String msg) {},
          onAudioQuality: (RtcConnection connection, int remoteUid,
              QualityType quality, int delay, int lost) {},
          onLastmileProbeResult: (LastmileProbeResult result) {},
          onAudioVolumeIndication: (RtcConnection connection, List speakers,
              int speakerNumber, int totalVolume) {},
          onLeaveChannel: (RtcConnection connection, RtcStats stats) {},
          onRtcStats: (RtcConnection connection, RtcStats stats) {},
          onAudioDeviceStateChanged: (String deviceId,
              MediaDeviceType deviceType, MediaDeviceStateType deviceState) {},
          onAudioMixingPositionChanged: (int position) {},
          onAudioMixingFinished: () {},
          onAudioEffectFinished: (int soundId) {},
          onVideoDeviceStateChanged: (String deviceId,
              MediaDeviceType deviceType, MediaDeviceStateType deviceState) {},
          onNetworkQuality: (RtcConnection connection, int remoteUid,
              QualityType txQuality, QualityType rxQuality) {},
          onIntraRequestReceived: (RtcConnection connection) {},
          onUplinkNetworkInfoUpdated: (UplinkNetworkInfo info) {},
          onDownlinkNetworkInfoUpdated: (DownlinkNetworkInfo info) {},
          onLastmileQuality: (QualityType quality) {},
          onFirstLocalVideoFrame:
              (VideoSourceType source, int width, int height, int elapsed) {},
          onFirstLocalVideoFramePublished:
              (VideoSourceType source, int elapsed) {},
          onFirstRemoteVideoDecoded: (RtcConnection connection, int remoteUid,
              int width, int height, int elapsed) {},
          onVideoSizeChanged: (RtcConnection connection,
              VideoSourceType sourceType,
              int uid,
              int width,
              int height,
              int rotation) {},
          onLocalVideoStateChanged: (VideoSourceType source,
              LocalVideoStreamState state, LocalVideoStreamReason reason) {},
          onRemoteVideoStateChanged: (RtcConnection connection,
              int remoteUid,
              RemoteVideoState state,
              RemoteVideoStateReason reason,
              int elapsed) {},
          onFirstRemoteVideoFrame: (RtcConnection connection, int remoteUid,
              int width, int height, int elapsed) {},
          onUserJoined:
              (RtcConnection connection, int remoteUid, int elapsed) {},
          onUserOffline: (RtcConnection connection, int remoteUid,
              UserOfflineReasonType reason) {},
          onUserMuteAudio:
              (RtcConnection connection, int remoteUid, bool muted) {},
          onUserMuteVideo:
              (RtcConnection connection, int remoteUid, bool muted) {},
          onUserEnableVideo:
              (RtcConnection connection, int remoteUid, bool enabled) {},
          onUserStateChanged:
              (RtcConnection connection, int remoteUid, int state) {},
          onUserEnableLocalVideo:
              (RtcConnection connection, int remoteUid, bool enabled) {},
          onRemoteAudioStats:
              (RtcConnection connection, RemoteAudioStats stats) {},
          onLocalAudioStats:
              (RtcConnection connection, LocalAudioStats stats) {},
          onLocalVideoStats: (VideoSourceType source, LocalVideoStats stats) {},
          onRemoteVideoStats:
              (RtcConnection connection, RemoteVideoStats stats) {},
          onCameraReady: () {},
          onCameraFocusAreaChanged: (int x, int y, int width, int height) {},
          onCameraExposureAreaChanged: (int x, int y, int width, int height) {},
          onFacePositionChanged: (int imageWidth, int imageHeight,
              List vecRectangle, List vecDistance, int numFaces) {},
          onVideoStopped: () {},
          onAudioMixingStateChanged:
              (AudioMixingStateType state, AudioMixingReasonType reason) {},
          onRhythmPlayerStateChanged:
              (RhythmPlayerStateType state, RhythmPlayerReason reason) {},
          onConnectionLost: (RtcConnection connection) {},
          onConnectionInterrupted: (RtcConnection connection) {},
          onConnectionBanned: (RtcConnection connection) {},
          onStreamMessage: (RtcConnection connection, int remoteUid,
              int streamId, Uint8List data, int length, int sentTs) {},
          onStreamMessageError: (RtcConnection connection, int remoteUid,
              int streamId, ErrorCodeType code, int missed, int cached) {},
          onRequestToken: (RtcConnection connection) {},
          onTokenPrivilegeWillExpire:
              (RtcConnection connection, String token) {},
          onLicenseValidationFailure:
              (RtcConnection connection, LicenseErrorType reason) {},
          onFirstLocalAudioFramePublished:
              (RtcConnection connection, int elapsed) {},
          onFirstRemoteAudioDecoded:
              (RtcConnection connection, int uid, int elapsed) {},
          onFirstRemoteAudioFrame:
              (RtcConnection connection, int userId, int elapsed) {},
          onLocalAudioStateChanged: (RtcConnection connection,
              LocalAudioStreamState state, LocalAudioStreamReason reason) {},
          onRemoteAudioStateChanged: (RtcConnection connection,
              int remoteUid,
              RemoteAudioState state,
              RemoteAudioStateReason reason,
              int elapsed) {},
          onActiveSpeaker: (RtcConnection connection, int uid) {},
          onContentInspectResult: (ContentInspectResult result) {},
          onSnapshotTaken: (RtcConnection connection, int uid, String filePath,
              int width, int height, int errCode) {},
          onClientRoleChanged: (RtcConnection connection,
              ClientRoleType oldRole,
              ClientRoleType newRole,
              ClientRoleOptions newRoleOptions) {},
          onClientRoleChangeFailed: (RtcConnection connection,
              ClientRoleChangeFailedReason reason,
              ClientRoleType currentRole) {},
          onAudioDeviceVolumeChanged:
              (MediaDeviceType deviceType, int volume, bool muted) {},
          onRtmpStreamingStateChanged: (String url,
              RtmpStreamPublishState state, RtmpStreamPublishReason reason) {},
          onRtmpStreamingEvent: (String url, RtmpStreamingEvent eventCode) {},
          onTranscodingUpdated: () {},
          onAudioRoutingChanged: (int routing) {},
          onChannelMediaRelayStateChanged:
              (ChannelMediaRelayState state, ChannelMediaRelayError code) {},
          onLocalPublishFallbackToAudioOnly: (bool isFallbackOrRecover) {},
          onRemoteSubscribeFallbackToAudioOnly:
              (int uid, bool isFallbackOrRecover) {},
          onRemoteAudioTransportStats: (RtcConnection connection, int remoteUid,
              int delay, int lost, int rxKBitRate) {},
          onRemoteVideoTransportStats: (RtcConnection connection, int remoteUid,
              int delay, int lost, int rxKBitRate) {},
          onConnectionStateChanged: (RtcConnection connection,
              ConnectionStateType state, ConnectionChangedReasonType reason) {},
          onWlAccMessage: (RtcConnection connection, WlaccMessageReason reason,
              WlaccSuggestAction action, String wlAccMsg) {},
          onWlAccStats: (RtcConnection connection, WlAccStats currentStats,
              WlAccStats averageStats) {},
          onNetworkTypeChanged: (RtcConnection connection, NetworkType type) {},
          onEncryptionError:
              (RtcConnection connection, EncryptionErrorType errorType) {},
          onPermissionError: (PermissionType permissionType) {},
          onLocalUserRegistered: (int uid, String userAccount) {},
          onUserInfoUpdated: (int uid, UserInfo info) {},
          onUserAccountUpdated: (RtcConnection connection, int remoteUid,
              String remoteUserAccount) {},
          onVideoRenderingTracingResult: (RtcConnection connection,
              int uid,
              MediaTraceEvent currentEvent,
              VideoRenderingTracingInfo tracingInfo) {},
          onLocalVideoTranscoderError:
              (TranscodingVideoStream stream, VideoTranscoderError error) {},
          onUploadLogResult: (RtcConnection connection, String requestId,
              bool success, UploadErrorReason reason) {},
          onAudioSubscribeStateChanged: (String channel,
              int uid,
              StreamSubscribeState oldState,
              StreamSubscribeState newState,
              int elapseSinceLastState) {},
          onVideoSubscribeStateChanged: (String channel,
              int uid,
              StreamSubscribeState oldState,
              StreamSubscribeState newState,
              int elapseSinceLastState) {},
          onAudioPublishStateChanged: (String channel,
              StreamPublishState oldState,
              StreamPublishState newState,
              int elapseSinceLastState) {},
          onVideoPublishStateChanged: (VideoSourceType source,
              String channel,
              StreamPublishState oldState,
              StreamPublishState newState,
              int elapseSinceLastState) {},
          onTranscodedStreamLayoutInfo: (RtcConnection connection, int uid,
              int width, int height, int layoutCount, List layoutlist) {},
          onExtensionEvent:
              (String provider, String extension, String key, String value) {},
          onExtensionStarted: (String provider, String extension) {},
          onExtensionStopped: (String provider, String extension) {},
          onExtensionError:
              (String provider, String extension, int error, String message) {},
          onSetRtmFlagResult: (RtcConnection connection, int code) {},
        );
        rtcEngine.registerEventHandler(
          eventHandler,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.registerEventHandler] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unregisterEventHandler',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final RtcEngineEventHandler eventHandler = RtcEngineEventHandler(
          onJoinChannelSuccess: (RtcConnection connection, int elapsed) {},
          onRejoinChannelSuccess: (RtcConnection connection, int elapsed) {},
          onProxyConnected: (String channel, int uid, ProxyType proxyType,
              String localProxyIp, int elapsed) {},
          onError: (ErrorCodeType err, String msg) {},
          onAudioQuality: (RtcConnection connection, int remoteUid,
              QualityType quality, int delay, int lost) {},
          onLastmileProbeResult: (LastmileProbeResult result) {},
          onAudioVolumeIndication: (RtcConnection connection, List speakers,
              int speakerNumber, int totalVolume) {},
          onLeaveChannel: (RtcConnection connection, RtcStats stats) {},
          onRtcStats: (RtcConnection connection, RtcStats stats) {},
          onAudioDeviceStateChanged: (String deviceId,
              MediaDeviceType deviceType, MediaDeviceStateType deviceState) {},
          onAudioMixingPositionChanged: (int position) {},
          onAudioMixingFinished: () {},
          onAudioEffectFinished: (int soundId) {},
          onVideoDeviceStateChanged: (String deviceId,
              MediaDeviceType deviceType, MediaDeviceStateType deviceState) {},
          onNetworkQuality: (RtcConnection connection, int remoteUid,
              QualityType txQuality, QualityType rxQuality) {},
          onIntraRequestReceived: (RtcConnection connection) {},
          onUplinkNetworkInfoUpdated: (UplinkNetworkInfo info) {},
          onDownlinkNetworkInfoUpdated: (DownlinkNetworkInfo info) {},
          onLastmileQuality: (QualityType quality) {},
          onFirstLocalVideoFrame:
              (VideoSourceType source, int width, int height, int elapsed) {},
          onFirstLocalVideoFramePublished:
              (VideoSourceType source, int elapsed) {},
          onFirstRemoteVideoDecoded: (RtcConnection connection, int remoteUid,
              int width, int height, int elapsed) {},
          onVideoSizeChanged: (RtcConnection connection,
              VideoSourceType sourceType,
              int uid,
              int width,
              int height,
              int rotation) {},
          onLocalVideoStateChanged: (VideoSourceType source,
              LocalVideoStreamState state, LocalVideoStreamReason reason) {},
          onRemoteVideoStateChanged: (RtcConnection connection,
              int remoteUid,
              RemoteVideoState state,
              RemoteVideoStateReason reason,
              int elapsed) {},
          onFirstRemoteVideoFrame: (RtcConnection connection, int remoteUid,
              int width, int height, int elapsed) {},
          onUserJoined:
              (RtcConnection connection, int remoteUid, int elapsed) {},
          onUserOffline: (RtcConnection connection, int remoteUid,
              UserOfflineReasonType reason) {},
          onUserMuteAudio:
              (RtcConnection connection, int remoteUid, bool muted) {},
          onUserMuteVideo:
              (RtcConnection connection, int remoteUid, bool muted) {},
          onUserEnableVideo:
              (RtcConnection connection, int remoteUid, bool enabled) {},
          onUserStateChanged:
              (RtcConnection connection, int remoteUid, int state) {},
          onUserEnableLocalVideo:
              (RtcConnection connection, int remoteUid, bool enabled) {},
          onRemoteAudioStats:
              (RtcConnection connection, RemoteAudioStats stats) {},
          onLocalAudioStats:
              (RtcConnection connection, LocalAudioStats stats) {},
          onLocalVideoStats: (VideoSourceType source, LocalVideoStats stats) {},
          onRemoteVideoStats:
              (RtcConnection connection, RemoteVideoStats stats) {},
          onCameraReady: () {},
          onCameraFocusAreaChanged: (int x, int y, int width, int height) {},
          onCameraExposureAreaChanged: (int x, int y, int width, int height) {},
          onFacePositionChanged: (int imageWidth, int imageHeight,
              List vecRectangle, List vecDistance, int numFaces) {},
          onVideoStopped: () {},
          onAudioMixingStateChanged:
              (AudioMixingStateType state, AudioMixingReasonType reason) {},
          onRhythmPlayerStateChanged:
              (RhythmPlayerStateType state, RhythmPlayerReason reason) {},
          onConnectionLost: (RtcConnection connection) {},
          onConnectionInterrupted: (RtcConnection connection) {},
          onConnectionBanned: (RtcConnection connection) {},
          onStreamMessage: (RtcConnection connection, int remoteUid,
              int streamId, Uint8List data, int length, int sentTs) {},
          onStreamMessageError: (RtcConnection connection, int remoteUid,
              int streamId, ErrorCodeType code, int missed, int cached) {},
          onRequestToken: (RtcConnection connection) {},
          onTokenPrivilegeWillExpire:
              (RtcConnection connection, String token) {},
          onLicenseValidationFailure:
              (RtcConnection connection, LicenseErrorType reason) {},
          onFirstLocalAudioFramePublished:
              (RtcConnection connection, int elapsed) {},
          onFirstRemoteAudioDecoded:
              (RtcConnection connection, int uid, int elapsed) {},
          onFirstRemoteAudioFrame:
              (RtcConnection connection, int userId, int elapsed) {},
          onLocalAudioStateChanged: (RtcConnection connection,
              LocalAudioStreamState state, LocalAudioStreamReason reason) {},
          onRemoteAudioStateChanged: (RtcConnection connection,
              int remoteUid,
              RemoteAudioState state,
              RemoteAudioStateReason reason,
              int elapsed) {},
          onActiveSpeaker: (RtcConnection connection, int uid) {},
          onContentInspectResult: (ContentInspectResult result) {},
          onSnapshotTaken: (RtcConnection connection, int uid, String filePath,
              int width, int height, int errCode) {},
          onClientRoleChanged: (RtcConnection connection,
              ClientRoleType oldRole,
              ClientRoleType newRole,
              ClientRoleOptions newRoleOptions) {},
          onClientRoleChangeFailed: (RtcConnection connection,
              ClientRoleChangeFailedReason reason,
              ClientRoleType currentRole) {},
          onAudioDeviceVolumeChanged:
              (MediaDeviceType deviceType, int volume, bool muted) {},
          onRtmpStreamingStateChanged: (String url,
              RtmpStreamPublishState state, RtmpStreamPublishReason reason) {},
          onRtmpStreamingEvent: (String url, RtmpStreamingEvent eventCode) {},
          onTranscodingUpdated: () {},
          onAudioRoutingChanged: (int routing) {},
          onChannelMediaRelayStateChanged:
              (ChannelMediaRelayState state, ChannelMediaRelayError code) {},
          onLocalPublishFallbackToAudioOnly: (bool isFallbackOrRecover) {},
          onRemoteSubscribeFallbackToAudioOnly:
              (int uid, bool isFallbackOrRecover) {},
          onRemoteAudioTransportStats: (RtcConnection connection, int remoteUid,
              int delay, int lost, int rxKBitRate) {},
          onRemoteVideoTransportStats: (RtcConnection connection, int remoteUid,
              int delay, int lost, int rxKBitRate) {},
          onConnectionStateChanged: (RtcConnection connection,
              ConnectionStateType state, ConnectionChangedReasonType reason) {},
          onWlAccMessage: (RtcConnection connection, WlaccMessageReason reason,
              WlaccSuggestAction action, String wlAccMsg) {},
          onWlAccStats: (RtcConnection connection, WlAccStats currentStats,
              WlAccStats averageStats) {},
          onNetworkTypeChanged: (RtcConnection connection, NetworkType type) {},
          onEncryptionError:
              (RtcConnection connection, EncryptionErrorType errorType) {},
          onPermissionError: (PermissionType permissionType) {},
          onLocalUserRegistered: (int uid, String userAccount) {},
          onUserInfoUpdated: (int uid, UserInfo info) {},
          onUserAccountUpdated: (RtcConnection connection, int remoteUid,
              String remoteUserAccount) {},
          onVideoRenderingTracingResult: (RtcConnection connection,
              int uid,
              MediaTraceEvent currentEvent,
              VideoRenderingTracingInfo tracingInfo) {},
          onLocalVideoTranscoderError:
              (TranscodingVideoStream stream, VideoTranscoderError error) {},
          onUploadLogResult: (RtcConnection connection, String requestId,
              bool success, UploadErrorReason reason) {},
          onAudioSubscribeStateChanged: (String channel,
              int uid,
              StreamSubscribeState oldState,
              StreamSubscribeState newState,
              int elapseSinceLastState) {},
          onVideoSubscribeStateChanged: (String channel,
              int uid,
              StreamSubscribeState oldState,
              StreamSubscribeState newState,
              int elapseSinceLastState) {},
          onAudioPublishStateChanged: (String channel,
              StreamPublishState oldState,
              StreamPublishState newState,
              int elapseSinceLastState) {},
          onVideoPublishStateChanged: (VideoSourceType source,
              String channel,
              StreamPublishState oldState,
              StreamPublishState newState,
              int elapseSinceLastState) {},
          onTranscodedStreamLayoutInfo: (RtcConnection connection, int uid,
              int width, int height, int layoutCount, List layoutlist) {},
          onExtensionEvent:
              (String provider, String extension, String key, String value) {},
          onExtensionStarted: (String provider, String extension) {},
          onExtensionStopped: (String provider, String extension) {},
          onExtensionError:
              (String provider, String extension, int error, String message) {},
          onSetRtmFlagResult: (RtcConnection connection, int code) {},
        );
        rtcEngine.unregisterEventHandler(
          eventHandler,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.unregisterEventHandler] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setRemoteUserPriority',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const PriorityType userPriority = PriorityType.priorityHigh;
        await rtcEngine.setRemoteUserPriority(
          uid: uid,
          userPriority: userPriority,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setRemoteUserPriority] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEncryptionMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String encryptionMode = "hello";
        await rtcEngine.setEncryptionMode(
          encryptionMode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setEncryptionMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setEncryptionSecret',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String secret = "hello";
        await rtcEngine.setEncryptionSecret(
          secret,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setEncryptionSecret] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableEncryption',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const EncryptionMode configEncryptionMode = EncryptionMode.aes128Xts;
        const String configEncryptionKey = "hello";
        Uint8List configEncryptionKdfSalt = Uint8List.fromList([1, 2, 3, 4, 5]);
        final EncryptionConfig config = EncryptionConfig(
          encryptionMode: configEncryptionMode,
          encryptionKey: configEncryptionKey,
          encryptionKdfSalt: configEncryptionKdfSalt,
        );
        await rtcEngine.enableEncryption(
          enabled: enabled,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableEncryption] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.sendStreamMessage',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int streamId = 10;
        Uint8List data = Uint8List.fromList([1, 2, 3, 4, 5]);
        const int length = 10;
        await rtcEngine.sendStreamMessage(
          streamId: streamId,
          data: data,
          length: length,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.sendStreamMessage] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.addVideoWatermark',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String watermarkUrl = "hello";
        const int positionInLandscapeModeX = 10;
        const int positionInLandscapeModeY = 10;
        const int positionInLandscapeModeWidth = 10;
        const int positionInLandscapeModeHeight = 10;
        const Rectangle optionsPositionInLandscapeMode = Rectangle(
          x: positionInLandscapeModeX,
          y: positionInLandscapeModeY,
          width: positionInLandscapeModeWidth,
          height: positionInLandscapeModeHeight,
        );
        const int positionInPortraitModeX = 10;
        const int positionInPortraitModeY = 10;
        const int positionInPortraitModeWidth = 10;
        const int positionInPortraitModeHeight = 10;
        const Rectangle optionsPositionInPortraitMode = Rectangle(
          x: positionInPortraitModeX,
          y: positionInPortraitModeY,
          width: positionInPortraitModeWidth,
          height: positionInPortraitModeHeight,
        );
        const double watermarkRatioXRatio = 10.0;
        const double watermarkRatioYRatio = 10.0;
        const double watermarkRatioWidthRatio = 10.0;
        const WatermarkRatio optionsWatermarkRatio = WatermarkRatio(
          xRatio: watermarkRatioXRatio,
          yRatio: watermarkRatioYRatio,
          widthRatio: watermarkRatioWidthRatio,
        );
        const WatermarkFitMode optionsMode =
            WatermarkFitMode.fitModeCoverPosition;
        const bool optionsVisibleInPreview = true;
        const WatermarkOptions options = WatermarkOptions(
          visibleInPreview: optionsVisibleInPreview,
          positionInLandscapeMode: optionsPositionInLandscapeMode,
          positionInPortraitMode: optionsPositionInPortraitMode,
          watermarkRatio: optionsWatermarkRatio,
          mode: optionsMode,
        );
        await rtcEngine.addVideoWatermark(
          watermarkUrl: watermarkUrl,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.addVideoWatermark] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.clearVideoWatermarks',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.clearVideoWatermarks();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.clearVideoWatermarks] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.pauseAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.pauseAudio();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.pauseAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.resumeAudio',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.resumeAudio();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.resumeAudio] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableWebSdkInteroperability',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableWebSdkInteroperability(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableWebSdkInteroperability] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.sendCustomReportMessage',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String id = "hello";
        const String category = "hello";
        const String event = "hello";
        const String label = "hello";
        const int value = 10;
        await rtcEngine.sendCustomReportMessage(
          id: id,
          category: category,
          event: event,
          label: label,
          value: value,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.sendCustomReportMessage] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerMediaMetadataObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final MetadataObserver observer = MetadataObserver(
          onMetadataReceived: (Metadata metadata) {},
        );
        const MetadataType type = MetadataType.unknownMetadata;
        rtcEngine.registerMediaMetadataObserver(
          observer: observer,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.registerMediaMetadataObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unregisterMediaMetadataObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final MetadataObserver observer = MetadataObserver(
          onMetadataReceived: (Metadata metadata) {},
        );
        const MetadataType type = MetadataType.unknownMetadata;
        rtcEngine.unregisterMediaMetadataObserver(
          observer: observer,
          type: type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.unregisterMediaMetadataObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startAudioFrameDump',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String channelId = "hello";
        const int uid = 10;
        const String location = "hello";
        const String uuid = "hello";
        const String passwd = "hello";
        const int durationMs = 10;
        const bool autoUpload = true;
        await rtcEngine.startAudioFrameDump(
          channelId: channelId,
          uid: uid,
          location: location,
          uuid: uuid,
          passwd: passwd,
          durationMs: durationMs,
          autoUpload: autoUpload,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startAudioFrameDump] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopAudioFrameDump',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String channelId = "hello";
        const int uid = 10;
        const String location = "hello";
        await rtcEngine.stopAudioFrameDump(
          channelId: channelId,
          uid: uid,
          location: location,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopAudioFrameDump] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAINSMode',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const AudioAinsMode mode = AudioAinsMode.ainsModeBalanced;
        await rtcEngine.setAINSMode(
          enabled: enabled,
          mode: mode,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAINSMode] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.registerLocalUserAccount',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String appId = "hello";
        const String userAccount = "hello";
        await rtcEngine.registerLocalUserAccount(
          appId: appId,
          userAccount: userAccount,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.registerLocalUserAccount] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.joinChannelWithUserAccount',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        const String channelId = "hello";
        const String userAccount = "hello";
        const ClientRoleType optionsClientRoleType =
            ClientRoleType.clientRoleBroadcaster;
        const AudienceLatencyLevelType optionsAudienceLatencyLevel =
            AudienceLatencyLevelType.audienceLatencyLevelLowLatency;
        const VideoStreamType optionsDefaultVideoStreamType =
            VideoStreamType.videoStreamHigh;
        const ChannelProfileType optionsChannelProfile =
            ChannelProfileType.channelProfileCommunication;
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishSecondaryCameraTrack = true;
        const bool optionsPublishThirdCameraTrack = true;
        const bool optionsPublishFourthCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishScreenCaptureVideo = true;
        const bool optionsPublishScreenCaptureAudio = true;
        const bool optionsPublishScreenTrack = true;
        const bool optionsPublishSecondaryScreenTrack = true;
        const bool optionsPublishThirdScreenTrack = true;
        const bool optionsPublishFourthScreenTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const int optionsPublishCustomAudioTrackId = 10;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishEncodedVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const bool optionsPublishMediaPlayerVideoTrack = true;
        const bool optionsPublishTranscodedVideoTrack = true;
        const bool optionsPublishMixedAudioTrack = true;
        const bool optionsAutoSubscribeAudio = true;
        const bool optionsAutoSubscribeVideo = true;
        const bool optionsEnableAudioRecordingOrPlayout = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsAudioDelayMs = 10;
        const int optionsMediaPlayerAudioDelayMs = 10;
        const String optionsToken = "hello";
        const bool optionsEnableBuiltInMediaEncryption = true;
        const bool optionsPublishRhythmPlayerTrack = true;
        const bool optionsIsInteractiveAudience = true;
        const int optionsCustomVideoTrackId = 10;
        const bool optionsIsAudioFilterable = true;
        const ChannelMediaOptions options = ChannelMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishSecondaryCameraTrack: optionsPublishSecondaryCameraTrack,
          publishThirdCameraTrack: optionsPublishThirdCameraTrack,
          publishFourthCameraTrack: optionsPublishFourthCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishScreenCaptureVideo: optionsPublishScreenCaptureVideo,
          publishScreenCaptureAudio: optionsPublishScreenCaptureAudio,
          publishScreenTrack: optionsPublishScreenTrack,
          publishSecondaryScreenTrack: optionsPublishSecondaryScreenTrack,
          publishThirdScreenTrack: optionsPublishThirdScreenTrack,
          publishFourthScreenTrack: optionsPublishFourthScreenTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomAudioTrackId: optionsPublishCustomAudioTrackId,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishEncodedVideoTrack: optionsPublishEncodedVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerVideoTrack: optionsPublishMediaPlayerVideoTrack,
          publishTranscodedVideoTrack: optionsPublishTranscodedVideoTrack,
          publishMixedAudioTrack: optionsPublishMixedAudioTrack,
          autoSubscribeAudio: optionsAutoSubscribeAudio,
          autoSubscribeVideo: optionsAutoSubscribeVideo,
          enableAudioRecordingOrPlayout: optionsEnableAudioRecordingOrPlayout,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          clientRoleType: optionsClientRoleType,
          audienceLatencyLevel: optionsAudienceLatencyLevel,
          defaultVideoStreamType: optionsDefaultVideoStreamType,
          channelProfile: optionsChannelProfile,
          audioDelayMs: optionsAudioDelayMs,
          mediaPlayerAudioDelayMs: optionsMediaPlayerAudioDelayMs,
          token: optionsToken,
          enableBuiltInMediaEncryption: optionsEnableBuiltInMediaEncryption,
          publishRhythmPlayerTrack: optionsPublishRhythmPlayerTrack,
          isInteractiveAudience: optionsIsInteractiveAudience,
          customVideoTrackId: optionsCustomVideoTrackId,
          isAudioFilterable: optionsIsAudioFilterable,
        );
        await rtcEngine.joinChannelWithUserAccount(
          token: token,
          channelId: channelId,
          userAccount: userAccount,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.joinChannelWithUserAccount] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.joinChannelWithUserAccountEx',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String token = "hello";
        const String channelId = "hello";
        const String userAccount = "hello";
        const ClientRoleType optionsClientRoleType =
            ClientRoleType.clientRoleBroadcaster;
        const AudienceLatencyLevelType optionsAudienceLatencyLevel =
            AudienceLatencyLevelType.audienceLatencyLevelLowLatency;
        const VideoStreamType optionsDefaultVideoStreamType =
            VideoStreamType.videoStreamHigh;
        const ChannelProfileType optionsChannelProfile =
            ChannelProfileType.channelProfileCommunication;
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishSecondaryCameraTrack = true;
        const bool optionsPublishThirdCameraTrack = true;
        const bool optionsPublishFourthCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishScreenCaptureVideo = true;
        const bool optionsPublishScreenCaptureAudio = true;
        const bool optionsPublishScreenTrack = true;
        const bool optionsPublishSecondaryScreenTrack = true;
        const bool optionsPublishThirdScreenTrack = true;
        const bool optionsPublishFourthScreenTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const int optionsPublishCustomAudioTrackId = 10;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishEncodedVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const bool optionsPublishMediaPlayerVideoTrack = true;
        const bool optionsPublishTranscodedVideoTrack = true;
        const bool optionsPublishMixedAudioTrack = true;
        const bool optionsAutoSubscribeAudio = true;
        const bool optionsAutoSubscribeVideo = true;
        const bool optionsEnableAudioRecordingOrPlayout = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsAudioDelayMs = 10;
        const int optionsMediaPlayerAudioDelayMs = 10;
        const String optionsToken = "hello";
        const bool optionsEnableBuiltInMediaEncryption = true;
        const bool optionsPublishRhythmPlayerTrack = true;
        const bool optionsIsInteractiveAudience = true;
        const int optionsCustomVideoTrackId = 10;
        const bool optionsIsAudioFilterable = true;
        const ChannelMediaOptions options = ChannelMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishSecondaryCameraTrack: optionsPublishSecondaryCameraTrack,
          publishThirdCameraTrack: optionsPublishThirdCameraTrack,
          publishFourthCameraTrack: optionsPublishFourthCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishScreenCaptureVideo: optionsPublishScreenCaptureVideo,
          publishScreenCaptureAudio: optionsPublishScreenCaptureAudio,
          publishScreenTrack: optionsPublishScreenTrack,
          publishSecondaryScreenTrack: optionsPublishSecondaryScreenTrack,
          publishThirdScreenTrack: optionsPublishThirdScreenTrack,
          publishFourthScreenTrack: optionsPublishFourthScreenTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomAudioTrackId: optionsPublishCustomAudioTrackId,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishEncodedVideoTrack: optionsPublishEncodedVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerVideoTrack: optionsPublishMediaPlayerVideoTrack,
          publishTranscodedVideoTrack: optionsPublishTranscodedVideoTrack,
          publishMixedAudioTrack: optionsPublishMixedAudioTrack,
          autoSubscribeAudio: optionsAutoSubscribeAudio,
          autoSubscribeVideo: optionsAutoSubscribeVideo,
          enableAudioRecordingOrPlayout: optionsEnableAudioRecordingOrPlayout,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          clientRoleType: optionsClientRoleType,
          audienceLatencyLevel: optionsAudienceLatencyLevel,
          defaultVideoStreamType: optionsDefaultVideoStreamType,
          channelProfile: optionsChannelProfile,
          audioDelayMs: optionsAudioDelayMs,
          mediaPlayerAudioDelayMs: optionsMediaPlayerAudioDelayMs,
          token: optionsToken,
          enableBuiltInMediaEncryption: optionsEnableBuiltInMediaEncryption,
          publishRhythmPlayerTrack: optionsPublishRhythmPlayerTrack,
          isInteractiveAudience: optionsIsInteractiveAudience,
          customVideoTrackId: optionsCustomVideoTrackId,
          isAudioFilterable: optionsIsAudioFilterable,
        );
        await rtcEngine.joinChannelWithUserAccountEx(
          token: token,
          channelId: channelId,
          userAccount: userAccount,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.joinChannelWithUserAccountEx] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getUserInfoByUserAccount',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String userAccount = "hello";
        await rtcEngine.getUserInfoByUserAccount(
          userAccount,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getUserInfoByUserAccount] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getUserInfoByUid',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        await rtcEngine.getUserInfoByUid(
          uid,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getUserInfoByUid] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopChannelMediaRelay',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopChannelMediaRelay();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.stopChannelMediaRelay] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.pauseAllChannelMediaRelay',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.pauseAllChannelMediaRelay();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.pauseAllChannelMediaRelay] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.resumeAllChannelMediaRelay',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.resumeAllChannelMediaRelay();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.resumeAllChannelMediaRelay] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDirectCdnStreamingAudioConfiguration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const AudioProfileType profile = AudioProfileType.audioProfileDefault;
        await rtcEngine.setDirectCdnStreamingAudioConfiguration(
          profile,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setDirectCdnStreamingAudioConfiguration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setDirectCdnStreamingVideoConfiguration',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const VideoCodecType configCodecType = VideoCodecType.videoCodecNone;
        const int dimensionsWidth = 10;
        const int dimensionsHeight = 10;
        const VideoDimensions configDimensions = VideoDimensions(
          width: dimensionsWidth,
          height: dimensionsHeight,
        );
        const OrientationMode configOrientationMode =
            OrientationMode.orientationModeAdaptive;
        const DegradationPreference configDegradationPreference =
            DegradationPreference.maintainQuality;
        const VideoMirrorModeType configMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const EncodingPreference advanceOptionsEncodingPreference =
            EncodingPreference.preferAuto;
        const CompressionPreference advanceOptionsCompressionPreference =
            CompressionPreference.preferLowLatency;
        const AdvanceOptions configAdvanceOptions = AdvanceOptions(
          encodingPreference: advanceOptionsEncodingPreference,
          compressionPreference: advanceOptionsCompressionPreference,
        );
        const int configFrameRate = 10;
        const int configBitrate = 10;
        const int configMinBitrate = 10;
        const VideoEncoderConfiguration config = VideoEncoderConfiguration(
          codecType: configCodecType,
          dimensions: configDimensions,
          frameRate: configFrameRate,
          bitrate: configBitrate,
          minBitrate: configMinBitrate,
          orientationMode: configOrientationMode,
          degradationPreference: configDegradationPreference,
          mirrorMode: configMirrorMode,
          advanceOptions: configAdvanceOptions,
        );
        await rtcEngine.setDirectCdnStreamingVideoConfiguration(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setDirectCdnStreamingVideoConfiguration] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startDirectCdnStreaming',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final DirectCdnStreamingEventHandler eventHandler =
            DirectCdnStreamingEventHandler(
          onDirectCdnStreamingStateChanged: (DirectCdnStreamingState state,
              DirectCdnStreamingReason reason, String message) {},
          onDirectCdnStreamingStats: (DirectCdnStreamingStats stats) {},
        );
        const String publishUrl = "hello";
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsCustomVideoTrackId = 10;
        const DirectCdnStreamingMediaOptions options =
            DirectCdnStreamingMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          customVideoTrackId: optionsCustomVideoTrackId,
        );
        await rtcEngine.startDirectCdnStreaming(
          eventHandler: eventHandler,
          publishUrl: publishUrl,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startDirectCdnStreaming] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopDirectCdnStreaming',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopDirectCdnStreaming();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.stopDirectCdnStreaming] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.updateDirectCdnStreamingMediaOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool optionsPublishCameraTrack = true;
        const bool optionsPublishMicrophoneTrack = true;
        const bool optionsPublishCustomAudioTrack = true;
        const bool optionsPublishCustomVideoTrack = true;
        const bool optionsPublishMediaPlayerAudioTrack = true;
        const int optionsPublishMediaPlayerId = 10;
        const int optionsCustomVideoTrackId = 10;
        const DirectCdnStreamingMediaOptions options =
            DirectCdnStreamingMediaOptions(
          publishCameraTrack: optionsPublishCameraTrack,
          publishMicrophoneTrack: optionsPublishMicrophoneTrack,
          publishCustomAudioTrack: optionsPublishCustomAudioTrack,
          publishCustomVideoTrack: optionsPublishCustomVideoTrack,
          publishMediaPlayerAudioTrack: optionsPublishMediaPlayerAudioTrack,
          publishMediaPlayerId: optionsPublishMediaPlayerId,
          customVideoTrackId: optionsCustomVideoTrackId,
        );
        await rtcEngine.updateDirectCdnStreamingMediaOptions(
          options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.updateDirectCdnStreamingMediaOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startRhythmPlayer',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String sound1 = "hello";
        const String sound2 = "hello";
        const int configBeatsPerMeasure = 10;
        const int configBeatsPerMinute = 10;
        const AgoraRhythmPlayerConfig config = AgoraRhythmPlayerConfig(
          beatsPerMeasure: configBeatsPerMeasure,
          beatsPerMinute: configBeatsPerMinute,
        );
        await rtcEngine.startRhythmPlayer(
          sound1: sound1,
          sound2: sound2,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.startRhythmPlayer] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.stopRhythmPlayer',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.stopRhythmPlayer();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.stopRhythmPlayer] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.configRhythmPlayer',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int configBeatsPerMeasure = 10;
        const int configBeatsPerMinute = 10;
        const AgoraRhythmPlayerConfig config = AgoraRhythmPlayerConfig(
          beatsPerMeasure: configBeatsPerMeasure,
          beatsPerMinute: configBeatsPerMinute,
        );
        await rtcEngine.configRhythmPlayer(
          config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.configRhythmPlayer] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.takeSnapshot',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int uid = 10;
        const String filePath = "hello";
        await rtcEngine.takeSnapshot(
          uid: uid,
          filePath: filePath,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.takeSnapshot] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableContentInspect',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        const String configExtraInfo = "hello";
        const String configServerConfig = "hello";
        const List<ContentInspectModule> configModules = [];
        const int configModuleCount = 10;
        const ContentInspectConfig config = ContentInspectConfig(
          extraInfo: configExtraInfo,
          serverConfig: configServerConfig,
          modules: configModules,
          moduleCount: configModuleCount,
        );
        await rtcEngine.enableContentInspect(
          enabled: enabled,
          config: config,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.enableContentInspect] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustCustomAudioPublishVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int trackId = 10;
        const int volume = 10;
        await rtcEngine.adjustCustomAudioPublishVolume(
          trackId: trackId,
          volume: volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustCustomAudioPublishVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.adjustCustomAudioPlayoutVolume',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int trackId = 10;
        const int volume = 10;
        await rtcEngine.adjustCustomAudioPlayoutVolume(
          trackId: trackId,
          volume: volume,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.adjustCustomAudioPlayoutVolume] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setCloudProxy',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const CloudProxyType proxyType = CloudProxyType.noneProxy;
        await rtcEngine.setCloudProxy(
          proxyType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setCloudProxy] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAdvancedAudioOptions',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int optionsAudioProcessingChannels = 10;
        const AdvancedAudioOptions options = AdvancedAudioOptions(
          audioProcessingChannels: optionsAudioProcessingChannels,
        );
        const int sourceType = 10;
        await rtcEngine.setAdvancedAudioOptions(
          options: options,
          sourceType: sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.setAdvancedAudioOptions] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setAVSyncSource',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String channelId = "hello";
        const int uid = 10;
        await rtcEngine.setAVSyncSource(
          channelId: channelId,
          uid: uid,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setAVSyncSource] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableVideoImageSource',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enable = true;
        const VideoMirrorModeType optionsMirrorMode =
            VideoMirrorModeType.videoMirrorModeAuto;
        const String optionsImageUrl = "hello";
        const int optionsFps = 10;
        const ImageTrackOptions options = ImageTrackOptions(
          imageUrl: optionsImageUrl,
          fps: optionsFps,
          mirrorMode: optionsMirrorMode,
        );
        await rtcEngine.enableVideoImageSource(
          enable: enable,
          options: options,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableVideoImageSource] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getCurrentMonotonicTimeInMs',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getCurrentMonotonicTimeInMs();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getCurrentMonotonicTimeInMs] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableWirelessAccelerate',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool enabled = true;
        await rtcEngine.enableWirelessAccelerate(
          enabled,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableWirelessAccelerate] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getNetworkType',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getNetworkType();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getNetworkType] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setParameters',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const String parameters = "hello";
        await rtcEngine.setParameters(
          parameters,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setParameters] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.startMediaRenderingTracing',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.startMediaRenderingTracing();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.startMediaRenderingTracing] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.enableInstantMediaRendering',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.enableInstantMediaRendering();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.enableInstantMediaRendering] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getNtpWallTimeInMs',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getNtpWallTimeInMs();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getNtpWallTimeInMs] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.isFeatureAvailableOnDevice',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const FeatureType type = FeatureType.videoVirtualBackground;
        await rtcEngine.isFeatureAvailableOnDevice(
          type,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.isFeatureAvailableOnDevice] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.release',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const bool sync = true;
        await rtcEngine.release(
          sync: sync,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.release] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getAudioDeviceManager',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getAudioDeviceManager();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getAudioDeviceManager] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getVideoDeviceManager',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getVideoDeviceManager();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getVideoDeviceManager] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getMusicContentCenter',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getMusicContentCenter();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getMusicContentCenter] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getMediaEngine',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getMediaEngine();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getMediaEngine] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getLocalSpatialAudioEngine',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getLocalSpatialAudioEngine();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.getLocalSpatialAudioEngine] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getH265Transcoder',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        rtcEngine.getH265Transcoder();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getH265Transcoder] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.sendMetaData',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int metadataUid = 10;
        const int metadataSize = 10;
        Uint8List metadataBuffer = Uint8List.fromList([1, 2, 3, 4, 5]);
        const int metadataTimeStampMs = 10;
        final Metadata metadata = Metadata(
          uid: metadataUid,
          size: metadataSize,
          buffer: metadataBuffer,
          timeStampMs: metadataTimeStampMs,
        );
        const VideoSourceType sourceType =
            VideoSourceType.videoSourceCameraPrimary;
        await rtcEngine.sendMetaData(
          metadata: metadata,
          sourceType: sourceType,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.sendMetaData] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.setMaxMetadataSize',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        const int size = 10;
        await rtcEngine.setMaxMetadataSize(
          size,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.setMaxMetadataSize] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.unregisterAudioEncodedFrameObserver',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        final AudioEncodedFrameObserver observer = AudioEncodedFrameObserver(
          onRecordAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
          onPlaybackAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
          onMixedAudioEncodedFrame: (Uint8List frameBuffer, int length,
              EncodedAudioFrameInfo audioEncodedFrameInfo) {},
        );
        rtcEngine.unregisterAudioEncodedFrameObserver(
          observer,
        );
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint(
              '[RtcEngine.unregisterAudioEncodedFrameObserver] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );

  testWidgets(
    'RtcEngine.getNativeHandle',
    (WidgetTester tester) async {
      String engineAppId = const String.fromEnvironment('TEST_APP_ID',
          defaultValue: '<YOUR_APP_ID>');

      RtcEngine rtcEngine = createAgoraRtcEngine();
      await rtcEngine.initialize(RtcEngineContext(
        appId: engineAppId,
        areaCode: AreaCode.areaCodeGlob.value(),
      ));
      await rtcEngine.setParameters('{"rtc.enable_debug_log": true}');

      try {
        await rtcEngine.getNativeHandle();
      } catch (e) {
        if (e is! AgoraRtcException) {
          debugPrint('[RtcEngine.getNativeHandle] error: ${e.toString()}');
          rethrow;
        }

        if (e.code != -4) {
          // Only not supported error supported.
          rethrow;
        }
      }

      await rtcEngine.release();
    },
  );
}
